(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9637:function(e,t,s){Promise.resolve().then(s.bind(s,6170))},6170:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var r=s(7437),l=s(2265),a=s(9397),i=s(3247),n=s(9076),d=s(2451),o=s(9227),c=s(3276),x=s(407),h=s(429);function p(e){let{index:t,value:s,x:l,y:a,isActive:i=!1,isQuerying:n=!1,isUpdating:d=!1,isAccumulated:o=!1,isUpdated:c=!1,showBinary:x=!1,showNodeIndex:p=!0,previousValue:g,changelogY:m,actualDelta:u,intermediateValues:b}=e,y=t.toString(2).padStart(8,"0"),f=t;for(;f%2==0;)f/=2;let j=()=>d?"#f59e0b":n?"#8b5cf6":i?"#3b82f6":o?"#22c55e":c?"#fbbf24":"#4b5563";return(0,r.jsxs)("g",{children:[(0,r.jsx)(h.E.circle,{cx:l,cy:a,r:38,fill:j(),fillOpacity:.25,stroke:i||n||d?j():"#374151",strokeWidth:i||n||d?3:2.5,filter:i||n||d?"url(#strongGlow)":"url(#glow)",initial:{scale:0},animate:{scale:i||n||d?1.15:1},transition:{type:"spring",stiffness:300,damping:20},style:{backdropFilter:"blur(10px)"}}),(0,r.jsx)("circle",{cx:l,cy:a,r:35,fill:j(),fillOpacity:.15,pointerEvents:"none"}),p&&(0,r.jsxs)("text",{x:l,y:a-12,textAnchor:"middle",fill:"white",fontSize:"18",fontWeight:"normal",filter:"url(#glow)",style:{textShadow:"0 2px 4px rgba(0,0,0,0.5)"},children:["[",t,"]"]}),(d||n)&&void 0!==g&&g!==s?(0,r.jsx)("g",{children:(()=>{let e=void 0!==u?u:s-g,t=n?"#fbbf24":e>0?"#22c55e":"#ef4444",i=void 0!==m?m:a-5;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.E.text,{x:l,y:a+10,textAnchor:"middle",fill:"white",fontSize:"16",fontWeight:"bold",filter:"url(#glow)",initial:{opacity:1,scale:1},animate:{opacity:[1,1,0],scale:[1,1.1,.9]},transition:{duration:.6,times:[0,.4,1]},children:g}),(0,r.jsx)(h.E.text,{x:l,y:i,textAnchor:"middle",fill:t,fontSize:"24",fontWeight:"bold",filter:"url(#strongGlow)",initial:{opacity:0,scale:1.4},animate:{opacity:[0,1,1,0],scale:[1.4,1.4,1.4,1]},transition:{duration:1,times:[0,.3,.7,1],delay:.4},children:e>0?"+".concat(e):"".concat(e)}),(0,r.jsx)(h.E.text,{x:l,y:a+12,textAnchor:"middle",fill:"white",fontSize:"21",fontWeight:"bold",filter:"url(#glow)",initial:{opacity:0,scale:1.5},animate:{opacity:1,scale:1,fill:[t,"#ffffff"]},transition:{duration:.5,delay:1.4,fill:{duration:.4,delay:1.6}},children:s})]})})()}):(0,r.jsx)("text",{x:l,y:a+12,textAnchor:"middle",fill:"white",fontSize:"21",fontWeight:"bold",filter:"url(#glow)",style:{textShadow:"0 2px 4px rgba(0,0,0,0.5)"},children:s}),x&&(0,r.jsxs)(h.E.g,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,r.jsx)("rect",{x:l-45,y:a+40,width:90,height:22,fill:"rgba(0, 0, 0, 0.3)",rx:"4",filter:"url(#glow)"}),(0,r.jsx)("text",{x:l,y:a+54,textAnchor:"middle",fill:"#9ca3af",fontSize:"13",fontFamily:"monospace",fontWeight:"bold",children:y})]}),x&&(i||n||d)&&(0,r.jsxs)(h.E.g,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.3,type:"spring"},children:[(0,r.jsx)("rect",{x:l-35,y:a+66,width:70,height:20,fill:"rgba(34, 197, 94, 0.2)",stroke:"#22c55e",strokeWidth:"1",rx:"4",filter:"url(#glow)"}),(0,r.jsxs)("text",{x:l,y:a+79,textAnchor:"middle",fill:"#22c55e",fontSize:"12",fontFamily:"monospace",fontWeight:"bold",filter:"url(#glow)",children:["LSB: ",t&-t]})]})]})}function g(e){let{tree:t,activeIndices:s=[],queryingIndices:a=[],updatingIndices:i=[],accumulatedIndices:n=[],updatedIndices:d=[],showBinary:o=!1,showNodeIndex:c=!0,dualTrees:x=null,treeSnapshot:g=[],dualTreeSnapshots:m=null,changeLog:u=[],prefixSumValues:b=[],cumulativeDeltaTypes:y=new Map,currentOperation:f,currentStep:j=0}=e,[v,w]=(0,l.useState)(null),N=g.length>0?g:t,k=new Map,S=new Map,C=new Set,D=new Map;if(f&&void 0!==j&&u.length>0)for(let e=0;e<=j&&e<u.length;e++){let t=u[e];if(t&&!t.isQuery&&void 0!==t.delta){C.add(t.index),S.set(t.index,t.delta);let e=D.get(t.index)||{hasPositive:!1,hasNegative:!1};t.delta>0&&(e.hasPositive=!0),t.delta<0&&(e.hasNegative=!0),D.set(t.index,e)}}else u.forEach(e=>{e.isQuery||void 0===e.delta||(k.set(e.index,e.delta),C.add(e.index),S.set(e.index,e.delta))}),y.forEach((e,t)=>{D.set(t,e)});let M=t.length-1,I=140*M,A=0,W=M;for(;W>0;)A++,W>>=1;let B=0;if(u.length>0){let e=Array.from(u.reduce((e,t)=>{let s=e.get(t.index)||0;return e.set(t.index,s+1),e},new Map).values());e.length>0&&(B=Math.max(...e))}let F=B>0?80+35*B:0,G=b.length>0?160:0,T=-120+160*A+F+G+10,z=e=>{let t=0,s=e;for(;s%2==0;)t++,s/=2;let r=0,l=M;for(;l>0;)r++,l>>=1;return{x:(e-.5)*140,y:-120+(r-t-1)*160,level:t}},E=e=>{let t=e+(e&-e);return t<=M?t:null},Q=(()=>{let e=[];for(let t=1;t<=M;t++){let s=t&-t,r=t-s+1,l=t,a=z(t),i=140*s,n=(r-1)*140,d=a.y-60;e.push({x:n,y:d,width:i,height:120,level:a.level,index:t,rangeStart:r,rangeEnd:l})}return e})(),q=(e,t,l,o)=>{let x=e.length-1,g=.54*T,m=20;4===x?(m=140,g=.6*T):8===x?(m=140,g=.57*T):16===x?(m=-130,g=.54*T):32===x?(m=-640,g=.51*T):x>=64&&(m=-1340,g=.39*T);let b=.6*F,y=m,N=g-b-50,k=null==f?void 0:f.steps[j],M=(null==k?void 0:k.treeId)===l||!(null==k?void 0:k.treeId);(null==k?void 0:k.treeId)&&k.treeId;let A=new Map;if(k&&(!k.treeId||k.treeId===l)&&k.operation.includes("+=")){let e=k.operation.match(/\+=\s*(-?\d+)/);if(e){let t=parseInt(e[1]);A.set(k.index,t)}}let W=new Map;if(f&&u.length>0){let e=new Map;o.forEach((t,s)=>e.set(s,t));for(let t=0;t<=j&&t<u.length;t++){let s=u[t];if(s&&!s.isQuery&&(!s.treeId||s.treeId===l)){var B;let t=s.index,r=e.get(t)||0,l=null!==(B=s.newValue)&&void 0!==B?B:r+(s.delta||0);W.has(t)||W.set(t,[o[t]||0]),W.get(t).push(l),e.set(t,l)}}}return(0,r.jsxs)("svg",{width:"100%",height:g,viewBox:"-50 -50 ".concat(.6*I+100," ").concat(g+100),className:"w-full",preserveAspectRatio:"xMidYMid meet",style:{overflow:"visible"},children:[(0,r.jsxs)("defs",{children:[(0,r.jsx)("pattern",{id:"grid-".concat(l),width:"50",height:"50",patternUnits:"userSpaceOnUse",children:(0,r.jsx)("path",{d:"M 50 0 L 0 0 0 50",fill:"none",stroke:"#1f2937",strokeWidth:"0.5"})}),(0,r.jsxs)("filter",{id:"glow-".concat(l),x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,r.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,r.jsxs)("feMerge",{children:[(0,r.jsx)("feMergeNode",{in:"coloredBlur"}),(0,r.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,r.jsxs)("filter",{id:"strongGlow-".concat(l),x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,r.jsx)("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),(0,r.jsxs)("feMerge",{children:[(0,r.jsx)("feMergeNode",{in:"coloredBlur"}),(0,r.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,r.jsxs)("filter",{id:"greenGlow",x:"-100%",y:"-100%",width:"300%",height:"300%",children:[(0,r.jsx)("feGaussianBlur",{stdDeviation:"8",result:"coloredBlur"}),(0,r.jsx)("feFlood",{floodColor:"#22c55e",floodOpacity:"0.9",result:"greenColor"}),(0,r.jsx)("feComposite",{in:"greenColor",in2:"coloredBlur",operator:"in",result:"coloredGlow"}),(0,r.jsxs)("feMerge",{children:[(0,r.jsx)("feMergeNode",{in:"coloredGlow"}),(0,r.jsx)("feMergeNode",{in:"coloredGlow"}),(0,r.jsx)("feMergeNode",{in:"coloredGlow"}),(0,r.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,r.jsxs)("filter",{id:"redGlow",x:"-100%",y:"-100%",width:"300%",height:"300%",children:[(0,r.jsx)("feGaussianBlur",{stdDeviation:"8",result:"coloredBlur"}),(0,r.jsx)("feFlood",{floodColor:"#ef4444",floodOpacity:"0.9",result:"redColor"}),(0,r.jsx)("feComposite",{in:"redColor",in2:"coloredBlur",operator:"in",result:"coloredGlow"}),(0,r.jsxs)("feMerge",{children:[(0,r.jsx)("feMergeNode",{in:"coloredGlow"}),(0,r.jsx)("feMergeNode",{in:"coloredGlow"}),(0,r.jsx)("feMergeNode",{in:"coloredGlow"}),(0,r.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,r.jsxs)("filter",{id:"activeTreeGlow-".concat(l),x:"-100%",y:"-100%",width:"300%",height:"300%",children:[(0,r.jsx)("feGaussianBlur",{stdDeviation:"20",result:"coloredBlur"}),(0,r.jsxs)("feMerge",{children:[(0,r.jsx)("feMergeNode",{in:"coloredBlur"}),(0,r.jsx)("feMergeNode",{in:"coloredBlur"}),(0,r.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,r.jsxs)("pattern",{id:"diagonalSplit-".concat(l),x:"0",y:"0",width:"1",height:"1",patternUnits:"objectBoundingBox",children:[(0,r.jsx)("polygon",{points:"0,0 1,0 0,1",fill:"#22c55e",fillOpacity:"0.3"}),(0,r.jsx)("polygon",{points:"1,0 1,1 0,1",fill:"#ef4444",fillOpacity:"0.3"}),(0,r.jsx)("line",{x1:"0",y1:"1",x2:"1",y2:"0",stroke:"#fbbf24",strokeWidth:"0.03",opacity:"0.8"})]})]}),(0,r.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid-".concat(l,")")}),M&&(null==k?void 0:k.treeId)&&(0,r.jsx)("rect",{x:"-40",y:m-200,width:.6*I+80,height:(g+80)*1.2,fill:"rgba(0, 0, 0, 0.25)",stroke:"tree1"===l?"#60a5fa":"#a78bfa",strokeWidth:"5",rx:"12",filter:"url(#activeTreeGlow-".concat(l,")"),children:(0,r.jsx)("animate",{attributeName:"stroke-opacity",values:"0.6;1;0.6",dur:"1.5s",repeatCount:"indefinite"})}),(0,r.jsx)("text",{x:"50%",y:m-130,textAnchor:"middle",fill:"tree1"===l?"#60a5fa":"#a78bfa",fontSize:"34",fontWeight:"bold",filter:"url(#glow-".concat(l,")"),children:"tree1"===l?"BIT":"j \xd7 BIT"}),(0,r.jsxs)("g",{transform:"translate(0, ".concat(y,")"),children:[Q.map(e=>{let t=!(null==k?void 0:k.treeId)||k.treeId===l,o=t&&n.includes(e.index),c=t&&d.includes(e.index);t&&s.includes(e.index);let x=t&&a.includes(e.index),p=t&&i.includes(e.index),g=C.has(e.index)?S.get(e.index):void 0,m=D.get(e.index),u=C.has(e.index),b="rgba(75, 85, 99, 0.1)",y="#4b5563",f=u&&m&&m.hasPositive&&m.hasNegative,j=u&&m&&m.hasPositive&&!m.hasNegative,v=u&&m&&!m.hasPositive&&m.hasNegative;x||o?(b="rgba(234, 179, 8, 0.15)",y="#eab308"):c||p?f?(b="url(#diagonalSplit-".concat(l,")"),y="#d97706"):void 0!==g&&g>0?(b="rgba(34, 197, 94, 0.15)",y="#22c55e"):void 0!==g&&g<0?(b="rgba(239, 68, 68, 0.15)",y="#ef4444"):(b="rgba(59, 130, 246, 0.15)",y="#3b82f6"):f?(b="url(#diagonalSplit-".concat(l,")"),y="#d97706"):j?(b="rgba(34, 197, 94, 0.15)",y="#22c55e"):v&&(b="rgba(239, 68, 68, 0.15)",y="#ef4444");let w=c||p||x||o;if(f){let t=.6*e.x,s=.6*e.y,a=.6*e.width;return(0,r.jsxs)("g",{children:[(0,r.jsx)("rect",{x:t,y:s,width:a,height:72,fill:"none",stroke:"#d97706",strokeWidth:"1.5",rx:"4"}),(0,r.jsx)(h.E.polygon,{points:"".concat(t,",").concat(s," ").concat(t+a,",").concat(s," ").concat(t,",").concat(s+72),fill:"rgba(34, 197, 94, 0.25)",filter:w?"url(#strongGlow-".concat(l,")"):"url(#glow-".concat(l,")"),initial:{opacity:.7},animate:{opacity:w?[.85,1,.85]:.8},transition:{opacity:{repeat:w?1:0,duration:.3}}}),(0,r.jsx)(h.E.polygon,{points:"".concat(t+a,",").concat(s," ").concat(t+a,",").concat(s+72," ").concat(t,",").concat(s+72),fill:"rgba(239, 68, 68, 0.25)",filter:w?"url(#strongGlow-".concat(l,")"):"url(#glow-".concat(l,")"),initial:{opacity:.7},animate:{opacity:w?[.85,1,.85]:.8},transition:{opacity:{repeat:w?1:0,duration:.3}}}),(0,r.jsx)("line",{x1:t,y1:s+72,x2:t+a,y2:s,stroke:"#fbbf24",strokeWidth:"1.5",opacity:"0.6"})]},"block-".concat(l,"-").concat(e.index))}return(0,r.jsx)(h.E.rect,{x:.6*e.x,y:.6*e.y,width:.6*e.width,height:72,fill:b,stroke:y,strokeWidth:"1.5",rx:"4",filter:w?"url(#strongGlow-".concat(l,")"):"url(#glow-".concat(l,")"),initial:{opacity:.7},animate:{opacity:w?[.85,1,.85]:.8,scale:w?[1,1.02,1]:1},transition:{opacity:{repeat:w?1:0,duration:.3},scale:{repeat:w?1:0,duration:.3}}},"block-".concat(l,"-").concat(e.index))}),e.map((e,t)=>{if(0===t)return null;let n=E(t);if(!n)return null;let d=z(t),o=z(n),c=!(null==k?void 0:k.treeId)||k.treeId===l,x=c&&(s.includes(t)||s.includes(n)),p=c&&(a.includes(t)||a.includes(n)),g=c&&(i.includes(t)||i.includes(n)),m="#374151",u=1.5,b=.4;return g?(m="#f59e0b",u=3,b=.8):p?(m="#8b5cf6",u=3,b=.8):x&&(m="#3b82f6",u=3,b=.8),(0,r.jsx)(h.E.path,{d:"M ".concat(.6*d.x,",").concat(.6*d.y," Q ").concat(.6*d.x,",").concat((d.y+o.y)/2*.6," ").concat(.6*o.x,",").concat(.6*o.y),stroke:m,strokeWidth:u,fill:"none",opacity:b,filter:x||p||g?"url(#glow-".concat(l,")"):"none"},"edge-".concat(l,"-").concat(t))}),e.map((e,t)=>{let x;if(0===t)return null;let h=z(t),g=!(null==k?void 0:k.treeId)||k.treeId===l,m=g&&s.includes(t),u=g&&a.includes(t),b=g&&i.includes(t),y=g&&n.includes(t),f=g&&d.includes(t),j=o[t],v=W.get(t);if(v&&v.length>1)x=v[v.length-1];else{var w;x=null!==(w=o[t])&&void 0!==w?w:e}let S=(h.y+15)*.6;return(0,r.jsx)(p,{index:t,value:x,x:.6*h.x,y:.6*h.y,isActive:m,isQuerying:u,isUpdating:b,isAccumulated:y,isUpdated:f,showBinary:!1,showNodeIndex:c,previousValue:j,changelogY:(S+N)/2,actualDelta:A.get(t),intermediateValues:W.get(t)},"".concat(l,"-").concat(t))}),u.length>0&&f&&(()=>{f.steps.slice(0,j+1);let t=u.filter((e,t)=>{let s=!e.treeId||e.treeId===l;return t<=j&&s}),s=new Map;return t.forEach(e=>{s.has(e.index)||s.set(e.index,[]),s.get(e.index).push(e)}),(0,r.jsx)("g",{children:Array.from(s.entries()).map(t=>{let s,a,[i,n]=t,d=z(i),o=g-b-20,c=n.some(e=>!e.isQuery&&e.delta&&e.delta>0),x=n.some(e=>!e.isQuery&&e.delta&&e.delta<0);n.some(e=>e.isQuery)?(s="#eab308",a="rgba(234, 179, 8, 0.3)"):c&&x?(s="#d97706",a="url(#diagonalSplit-".concat(l,")")):c?(s="#22c55e",a="rgba(34, 197, 94, 0.3)"):x?(s="#ef4444",a="rgba(239, 68, 68, 0.3)"):(s="#6b7280",a="rgba(107, 114, 128, 0.3)");let h=(!(null==k?void 0:k.treeId)||k.treeId===l)&&(null==k?void 0:k.index)===i,p=Math.max(o,(d.y+15)*.6+60);return(0,r.jsxs)("g",{children:[h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("line",{x1:.6*d.x,y1:(d.y+15)*.6,x2:.6*d.x,y2:p,stroke:"#fbbf24",strokeWidth:"4",opacity:"0.3",strokeDasharray:"4 2",filter:"url(#strongGlow-".concat(l,")")}),(0,r.jsx)("line",{x1:.6*d.x,y1:(d.y+15)*.6,x2:.6*d.x,y2:p,stroke:"#fbbf24",strokeWidth:"2",opacity:"0.9",strokeDasharray:"4 2"})]}):(0,r.jsx)("line",{x1:.6*d.x,y1:(d.y+15)*.6,x2:.6*d.x,y2:p,stroke:"#374151",strokeWidth:"1",opacity:"0.5"}),c&&x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M ".concat(.6*d.x,",").concat(p-12," A ").concat(12,",").concat(12," 0 0,0 ").concat(.6*d.x,",").concat(p+12," Z"),fill:"rgba(34, 197, 94, 0.3)",stroke:"#22c55e",strokeWidth:"2",filter:"url(#glow-".concat(l,")")}),(0,r.jsx)("path",{d:"M ".concat(.6*d.x,",").concat(p-12," A ").concat(12,",").concat(12," 0 0,1 ").concat(.6*d.x,",").concat(p+12," Z"),fill:"rgba(239, 68, 68, 0.3)",stroke:"#ef4444",strokeWidth:"2",filter:"url(#glow-".concat(l,")")}),(0,r.jsx)("line",{x1:.6*d.x,y1:p-12,x2:.6*d.x,y2:p+12,stroke:"#d97706",strokeWidth:"2"})]}):(0,r.jsx)("circle",{cx:.6*d.x,cy:p,r:12,fill:a,stroke:s,strokeWidth:"2",filter:"url(#glow-".concat(l,")")}),(0,r.jsxs)("text",{x:.6*d.x,y:p+3.5999999999999996,textAnchor:"middle",fill:"white",fontSize:"17",fontWeight:"bold",filter:"url(#glow-".concat(l,")"),children:["[",i,"]"]}),(()=>{var t;let s="tree2"===l,a=e[i],o=n.length>0&&null!==(t=n[0].oldValue)&&void 0!==t?t:0;if(n.length>0&&n[0].isQuery){let e=a>0?"url(#greenGlow)":a<0?"url(#redGlow)":"url(#glow-".concat(l,")"),t=a>0?"#3b82f6":a<0?"#2563eb":"#3b82f6";return(0,r.jsx)("text",{x:.6*d.x,y:p+12+15.6,textAnchor:"middle",fill:t,fontSize:"24",fontWeight:"bold",filter:e,children:a},"query-result-".concat(l))}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("text",{x:.6*d.x,y:p+12+15.6,textAnchor:"middle",fill:"#9ca3af",fontSize:"16",fontWeight:"normal",filter:s?"url(#strongGlow-".concat(l,")"):"url(#glow-".concat(l,")"),children:["from ",o]},"change-from-".concat(l)),n.map((e,t)=>{let a,n;let o=p+12+15.6+(t+1)*21;if(a=e.isQuery?"#fbbf24":e.delta&&e.delta>0?"#34d399":e.delta&&e.delta<0?"#f87171":"#9ca3af",e.isQuery)n="+".concat(e.newValue);else{let t=e.delta||0;if(s&&(null==f?void 0:f.value)!==void 0&&(null==f?void 0:f.left)!==void 0&&(null==f?void 0:f.right)!==void 0){let e=f.value,s=f.left,r=f.right;if(t>0){let t=e>=0?"+":"";n="".concat(t).concat(e,"\xd7").concat(s-1)}else if(t<0){let t=e>=0?"-":"+";n="".concat(t).concat(Math.abs(e),"\xd7").concat(r)}else n="0"}else n=t>=0?"+".concat(t):"".concat(t)}return(0,r.jsxs)("g",{children:[(0,r.jsx)("text",{x:.6*d.x,y:o,textAnchor:"middle",fill:a,fontSize:"18",fontWeight:"bold",filter:s?"url(#strongGlow-".concat(l,")"):"url(#glow-".concat(l,")"),style:{cursor:"pointer"},onMouseEnter:()=>w({treeId:l,index:i,entryIdx:t}),onMouseLeave:()=>w(null),children:n}),(null==v?void 0:v.treeId)===l&&(null==v?void 0:v.index)===i&&(null==v?void 0:v.entryIdx)===t&&(0,r.jsxs)("g",{children:[(0,r.jsx)("rect",{x:.6*d.x+18,y:o-12,width:72,height:21,fill:"rgba(0, 0, 0, 0.9)",stroke:a,strokeWidth:"2",rx:2.4,filter:"url(#glow-".concat(l,")")}),(0,r.jsx)("text",{x:.6*d.x+54,y:o-1.2,textAnchor:"middle",fill:"white",fontSize:"14",fontWeight:"normal",children:"".concat(e.oldValue,"→").concat(e.newValue)})]})]},"change-text-".concat(l,"-").concat(t))}),(0,r.jsxs)("text",{x:.6*d.x,y:p+12+15.6+(n.length+1)*21,textAnchor:"middle",fill:"#fbbf24",fontSize:"20",fontWeight:"bold",filter:s?"url(#strongGlow-".concat(l,")"):"url(#glow-".concat(l,")"),children:["to ",a]},"change-to-".concat(l))]})})()]},"changelog-".concat(l,"-").concat(i))})})})()]})]})};if(x){let e=x.tree1.length-1,t=0,s=180;return 4===e?(t=60,s=180):8===e?(t=60,s=180):16===e?(t=-148,s=180):32===e?(t=-300,s=180):e>=64&&(t=-300,s=180),(0,r.jsxs)("div",{className:"w-full max-w-full overflow-x-auto",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-0",children:[(0,r.jsx)("div",{children:q(x.tree1,I/2,"tree1",(null==m?void 0:m.tree1)||x.tree1)}),(0,r.jsx)("div",{children:q(x.tree2,I/2,"tree2",(null==m?void 0:m.tree2)||x.tree2)})]}),b.length>0&&(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-900/30 via-indigo-900/30 to-blue-900/30 rounded-xl p-4 border border-purple-500/40 backdrop-blur-md shadow-xl shadow-purple-500/20",style:{marginTop:"".concat(t,"px")},children:[(0,r.jsxs)("div",{className:"text-center mb-3",children:[(0,r.jsx)("span",{className:"font-bold text-purple-300 text-lg drop-shadow-[0_0_10px_rgba(168,85,247,0.8)]",children:"\uD83D\uDCCA Reconstructed Array Values"}),(0,r.jsx)("div",{className:"text-xs text-purple-200/70 mt-1",children:"Actual values after range updates"})]}),(0,r.jsxs)("svg",{width:"100%",height:s,viewBox:"0 0 ".concat(I/2," ").concat(s),preserveAspectRatio:"xMidYMid meet",children:[(0,r.jsxs)("defs",{children:[(0,r.jsxs)("filter",{id:"line-glow",children:[(0,r.jsx)("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),(0,r.jsxs)("feMerge",{children:[(0,r.jsx)("feMergeNode",{in:"coloredBlur"}),(0,r.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,r.jsxs)("filter",{id:"point-glow",children:[(0,r.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,r.jsxs)("feMerge",{children:[(0,r.jsx)("feMergeNode",{in:"coloredBlur"}),(0,r.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(()=>{var e,t;let s=Math.max(...b,1),l=Math.min(...b,0),a=I/2/(b.length+1),i=Array.from(new Set(b)).sort((e,t)=>e-t),n=null!==(e=null==f?void 0:f.left)&&void 0!==e?e:0,d=null!==(t=null==f?void 0:f.right)&&void 0!==t?t:0,o=(null==f?void 0:f.type)==="range-query"&&n>0&&d>0;return(0,r.jsxs)(r.Fragment,{children:[i.map(e=>{let t=145-(e-l)/(s-l||1)*110;return(0,r.jsxs)("g",{children:[(0,r.jsx)("line",{x1:a/2,y1:t,x2:I/2-a/2,y2:t,stroke:"#a78bfa",strokeWidth:"1",strokeDasharray:"4 4",opacity:"0.4"}),(0,r.jsx)("text",{x:a/2-8,y:t+4,textAnchor:"end",fill:"#c4b5fd",fontSize:"12",fontWeight:"bold",children:e})]},"gridline-".concat(e))}),o&&(0,r.jsx)("rect",{x:a*n-a/3,y:35,width:a*(d-n+1),height:110,fill:"rgba(234, 179, 8, 0.12)",stroke:"#eab308",strokeWidth:"2",strokeDasharray:"6 4",rx:"6",filter:"url(#line-glow)"}),(0,r.jsx)("path",{d:b.map((e,t)=>"".concat(0===t?"M":"L"," ").concat(a*(t+1),",").concat(145-(e-l)/(s-l||1)*110)).join(" "),fill:"none",stroke:"url(#gradient-line)",strokeWidth:"2.5",filter:"url(#line-glow)"}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"gradient-line",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,r.jsx)("stop",{offset:"0%",stopColor:"#a78bfa"}),(0,r.jsx)("stop",{offset:"50%",stopColor:"#8b5cf6"}),(0,r.jsx)("stop",{offset:"100%",stopColor:"#7c3aed"})]})}),b.map((e,t)=>{let i=a*(t+1),c=o&&t+1>=n&&t+1<=d;return(0,r.jsxs)("g",{children:[(0,r.jsx)("circle",{cx:i,cy:145-(e-l)/(s-l||1)*110,r:c?"5":"3.5",fill:c?"#fbbf24":"#a78bfa",stroke:c?"#fde047":"#ddd6fe",strokeWidth:c?"2":"1.5",filter:"url(#point-glow)"}),(0,r.jsxs)("text",{x:i,y:160,textAnchor:"middle",fill:c?"#fbbf24":"#a78bfa",fontSize:"11",fontWeight:"bold",children:["[",t+1,"]"]})]},"point-".concat(t))})]})})()]})]}),(0,r.jsx)("div",{className:"mt-2 bg-gradient-to-br from-gray-900/90 to-gray-800/90 rounded-xl p-4 border border-gray-700/50 backdrop-blur-md",children:(0,r.jsxs)("div",{className:"text-sm text-gray-200 space-y-3",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("span",{className:"font-bold text-blue-400 text-lg",children:"\uD83C\uDF33 Dual Binary Indexed Tree"}),(0,r.jsx)("div",{className:"text-gray-400 text-xs mt-1",children:"Range-to-Range operations via coefficient decomposition"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,r.jsxs)("div",{className:"bg-blue-900/20 rounded-lg p-3 border border-blue-500/30 shadow-lg",children:[(0,r.jsx)("div",{className:"font-bold text-blue-300 mb-2 text-sm",children:"\uD83D\uDD35 Tree 1: Coefficient Array"}),(0,r.jsxs)("div",{className:"text-gray-300 mb-2",children:["Stores ",(0,r.jsx)("b",{children:"gradient values"})," (Δ) for linear term"]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"text-blue-200 bg-blue-950/30 px-2 py-1 rounded",style:{fontFamily:"Cambria, Georgia, serif",fontSize:"15px"},children:["tree1[",(0,r.jsx)("i",{children:"left"}),"] += ",(0,r.jsx)("b",{children:"Δ"})]}),(0,r.jsxs)("div",{className:"text-blue-200 bg-blue-950/30 px-2 py-1 rounded",style:{fontFamily:"Cambria, Georgia, serif",fontSize:"15px"},children:["tree1[",(0,r.jsx)("i",{children:"right"}),"+1] −= ",(0,r.jsx)("b",{children:"Δ"})]})]}),(0,r.jsx)("div",{className:"text-gray-400 mt-2 text-[10px]",children:"→ Marks start and end of range"})]}),(0,r.jsxs)("div",{className:"bg-purple-900/20 rounded-lg p-3 border border-purple-500/30 shadow-lg",children:[(0,r.jsx)("div",{className:"font-bold text-purple-300 mb-2 text-sm",children:"\uD83D\uDFE3 Tree 2: Offset Correction"}),(0,r.jsxs)("div",{className:"text-gray-300 mb-2",children:["Stores ",(0,r.jsx)("b",{children:"position-indexed"})," coefficients for constant term"]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"text-purple-200 bg-purple-950/30 px-2 py-1 rounded",style:{fontFamily:"Cambria, Georgia, serif",fontSize:"15px"},children:["tree2[",(0,r.jsx)("i",{children:"left"}),"] += ",(0,r.jsx)("b",{children:"Δ"}),"\xb7(",(0,r.jsx)("i",{children:"left"}),"−1)"]}),(0,r.jsxs)("div",{className:"text-purple-200 bg-purple-950/30 px-2 py-1 rounded",style:{fontFamily:"Cambria, Georgia, serif",fontSize:"15px"},children:["tree2[",(0,r.jsx)("i",{children:"right"}),"+1] −= ",(0,r.jsx)("b",{children:"Δ"}),"\xb7",(0,r.jsx)("i",{children:"right"})]})]}),(0,r.jsx)("div",{className:"text-gray-400 mt-2 text-[10px]",children:"→ Adjusts for position offset"})]})]}),(0,r.jsxs)("div",{className:"bg-emerald-900/20 rounded-lg p-4 border border-emerald-500/30 shadow-lg",children:[(0,r.jsx)("div",{className:"font-bold text-emerald-300 text-sm mb-3 text-center",children:"✨ How it Works"}),(0,r.jsxs)("div",{className:"space-y-2 text-[13px]",children:[(0,r.jsxs)("div",{className:"bg-emerald-950/40 rounded px-3 py-2",children:[(0,r.jsx)("div",{className:"text-emerald-200 font-semibold mb-1 text-[15px]",children:"1. Let's start with what we want:"}),(0,r.jsxs)("div",{className:"text-gray-300 text-[14px] space-y-1",children:[(0,r.jsxs)("div",{children:["We want to find ",(0,r.jsxs)("span",{className:"text-cyan-300",style:{textShadow:"0 0 5px rgba(103,232,249,0.3)"},children:[(0,r.jsx)("i",{children:"A"}),"[",(0,r.jsx)("i",{children:"i"}),"]"]})," = sum of all range updates affecting position ",(0,r.jsx)("i",{children:"i"})]}),(0,r.jsxs)("div",{className:"ml-3 text-gray-400 text-[13px]",children:["From the difference array, we know: ",(0,r.jsxs)("span",{style:{fontFamily:"Cambria, Georgia, serif",fontSize:"16px"},children:[(0,r.jsxs)("span",{className:"text-cyan-300",style:{textShadow:"0 0 5px rgba(103,232,249,0.3)"},children:[(0,r.jsx)("i",{children:"A"}),"[",(0,r.jsx)("i",{children:"i"}),"]"]})," = ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[1] + ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[2] + ... + ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[",(0,r.jsx)("i",{children:"i"}),"]"]})]})]})]}),(0,r.jsxs)("div",{className:"bg-emerald-950/40 rounded px-3 py-2",children:[(0,r.jsx)("div",{className:"text-emerald-200 font-semibold mb-1 text-[15px]",children:"2. Let's expand this sum:"}),(0,r.jsxs)("div",{className:"text-gray-300 space-y-1 text-[14px]",children:[(0,r.jsx)("div",{children:"If we write out each term:"}),(0,r.jsxs)("div",{className:"ml-3 font-mono text-[12px] bg-black/30 p-2 rounded",style:{fontFamily:"Cambria, Georgia, serif",fontSize:"15px",lineHeight:"1.6"},children:[(0,r.jsxs)("span",{className:"text-cyan-300",style:{textShadow:"0 0 5px rgba(103,232,249,0.3)"},children:[(0,r.jsx)("i",{children:"A"}),"[",(0,r.jsx)("i",{children:"i"}),"]"]})," = ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[1]\xd71 + ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[2]\xd71 + ... + ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[",(0,r.jsx)("i",{children:"i"}),"]\xd71"]}),(0,r.jsxs)("div",{className:"text-gray-400 text-[13px] ml-3",children:["Notice each ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})})," is multiplied by 1? Not so useful for Fenwick Tree..."]})]})]}),(0,r.jsxs)("div",{className:"bg-emerald-950/40 rounded px-3 py-2",children:[(0,r.jsx)("div",{className:"text-emerald-200 font-semibold mb-1 text-[15px]",children:"3. Here's a clever trick – rearrange to match indices!"}),(0,r.jsxs)("div",{className:"text-gray-300 space-y-1 text-[14px]",children:[(0,r.jsx)("div",{children:"Let's rewrite by adding and subtracting the same thing:"}),(0,r.jsxs)("div",{className:"ml-3 font-mono text-[12px] bg-black/30 p-2 rounded",style:{fontFamily:"Cambria, Georgia, serif",fontSize:"15px",lineHeight:"1.7"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"text-cyan-300",style:{textShadow:"0 0 5px rgba(103,232,249,0.3)"},children:[(0,r.jsx)("i",{children:"A"}),"[",(0,r.jsx)("i",{children:"i"}),"]"]})," = ",(0,r.jsx)("span",{className:"text-yellow-300",style:{textShadow:"0 0 4px rgba(253,224,71,0.3)"},children:(0,r.jsx)("i",{children:"i"})})," \xd7 (",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[1] + ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[2] + ... + ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[",(0,r.jsx)("i",{children:"i"}),"])"]}),(0,r.jsxs)("div",{className:"ml-4",children:["− (",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[1]\xd70 + ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[2]\xd71 + ... + ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[",(0,r.jsx)("i",{children:"i"}),"]\xd7(",(0,r.jsx)("i",{children:"i"}),"−1))"]})]}),(0,r.jsxs)("div",{className:"text-gray-400 text-[13px] ml-3",children:["Now the index ",(0,r.jsx)("i",{children:"j"})," matches the multiplier (",(0,r.jsx)("i",{children:"j"}),"−1) in the second part!"]})]})]}),(0,r.jsxs)("div",{className:"bg-emerald-950/40 rounded px-3 py-2",children:[(0,r.jsx)("div",{className:"text-emerald-200 font-semibold mb-1 text-[15px]",children:"4. So what do we need to store?"}),(0,r.jsxs)("div",{className:"text-gray-300 space-y-1 text-[14px]",children:[(0,r.jsx)("div",{children:"Looking at our formula, we need two separate sums:"}),(0,r.jsxs)("div",{className:"ml-3 space-y-1",children:[(0,r.jsxs)("div",{children:["\uD83D\uDD35 ",(0,r.jsx)("span",{className:"text-blue-300",style:{textShadow:"0 0 4px rgba(147,197,253,0.3)"},children:"Tree 1"}),": stores ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[",(0,r.jsx)("i",{children:"j"}),"] at each position"]}),(0,r.jsxs)("div",{children:["\uD83D\uDFE3 ",(0,r.jsx)("span",{className:"text-purple-300",style:{textShadow:"0 0 4px rgba(216,180,254,0.3)"},children:"Tree 2"}),": stores ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[",(0,r.jsx)("i",{children:"j"}),"]\xd7(",(0,r.jsx)("i",{children:"j"}),"−1) at each position"]})]}),(0,r.jsx)("div",{className:"text-gray-400 text-[13px] ml-3 mt-2",children:"Then we can compute prefix sums separately and combine them!"}),(0,r.jsx)("div",{className:"text-gray-400 text-[12px] ml-3 mt-2",children:"Then we can compute prefix sums separately and combine them!"})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-emerald-900/40 to-blue-900/40 rounded px-3 py-2 border border-emerald-400/50",children:[(0,r.jsx)("div",{className:"text-emerald-200 font-bold mb-2 text-center text-sm",style:{textShadow:"0 0 6px rgba(110,231,183,0.3)"},children:"\uD83C\uDFAF The Final Formula:"}),(0,r.jsxs)("div",{className:"text-center bg-black/40 px-4 py-3 rounded border border-emerald-500/30",style:{fontFamily:"Cambria, Georgia, serif",fontSize:"18px",fontWeight:"bold",boxShadow:"0 0 15px rgba(110,231,183,0.15)"},children:[(0,r.jsxs)("span",{className:"text-cyan-300",style:{textShadow:"0 0 6px rgba(103,232,249,0.3)"},children:[(0,r.jsx)("i",{children:"A"}),"[",(0,r.jsx)("i",{children:"i"}),"]"]})," = ",(0,r.jsx)("span",{className:"text-yellow-300",style:{textShadow:"0 0 5px rgba(253,224,71,0.3)"},children:(0,r.jsx)("i",{children:"i"})})," \xb7 ",(0,r.jsxs)("span",{style:{fontSize:"22px",position:"relative",display:"inline-block",verticalAlign:"middle",color:"#fbbf24",textShadow:"0 0 6px rgba(251,191,36,0.3)"},children:[(0,r.jsx)("span",{style:{position:"absolute",fontSize:"9px",top:"-10px",right:"-2px"},children:(0,r.jsx)("i",{children:"i"})}),(0,r.jsxs)("span",{style:{position:"absolute",fontSize:"9px",bottom:"-10px",right:"-10px"},children:[(0,r.jsx)("i",{children:"j"}),"=1"]}),"∑"]})," ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 5px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[",(0,r.jsx)("i",{children:"j"}),"] ",(0,r.jsx)("span",{className:"text-gray-400",children:"−"})," ",(0,r.jsxs)("span",{style:{fontSize:"22px",position:"relative",display:"inline-block",verticalAlign:"middle",color:"#fbbf24",textShadow:"0 0 6px rgba(251,191,36,0.3)"},children:[(0,r.jsx)("span",{style:{position:"absolute",fontSize:"9px",top:"-10px",right:"-2px"},children:(0,r.jsx)("i",{children:"i"})}),(0,r.jsxs)("span",{style:{position:"absolute",fontSize:"9px",bottom:"-10px",right:"-10px"},children:[(0,r.jsx)("i",{children:"j"}),"=1"]}),"∑"]})," ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 5px rgba(249,168,212,0.3)"},children:(0,r.jsx)("b",{children:"Δ"})}),"[",(0,r.jsx)("i",{children:"j"}),"]\xb7(",(0,r.jsx)("i",{children:"j"}),"−1)"]}),(0,r.jsxs)("div",{className:"text-gray-400 mt-2 text-[12px] text-center",style:{fontFamily:"Cambria, Georgia, serif"},children:["Just query both trees and combine! ",(0,r.jsxs)("span",{className:"text-blue-300",style:{textShadow:"0 0 4px rgba(147,197,253,0.3)"},children:["prefixSum(Tree1, ",(0,r.jsx)("i",{children:"i"}),")"]})," and ",(0,r.jsxs)("span",{className:"text-purple-300",style:{textShadow:"0 0 4px rgba(216,180,254,0.3)"},children:["prefixSum(Tree2, ",(0,r.jsx)("i",{children:"i"}),")"]})," – both ",(0,r.jsxs)("span",{className:"text-emerald-300",style:{textShadow:"0 0 4px rgba(110,231,183,0.3)"},children:["O(log ",(0,r.jsx)("i",{children:"n"}),")"]})," ✨"]})]})]})]}),u.length>0&&(0,r.jsxs)("div",{className:"bg-amber-900/20 rounded-lg p-3 border border-amber-500/30 shadow-lg",children:[(0,r.jsx)("div",{className:"font-bold text-amber-300 text-sm mb-2",children:"\uD83D\uDCCA Current Operation:"}),(0,r.jsxs)("div",{className:"text-gray-300 text-xs space-y-1",children:[u.slice(0,3).map((e,t)=>{let s="tree1"===e.treeId?"text-blue-400":"text-purple-400",l="tree1"===e.treeId?"Tree1":"Tree2",a="tree1"===e.treeId?"\uD83D\uDD35":"\uD83D\uDFE3";return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-amber-400",children:"•"}),(0,r.jsx)("span",{children:e.isQuery?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:s,children:[a," ",l]}),": Query at [",e.index,"] = ",e.newValue]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:s,children:[a," ",l]}),"[",e.index,"] +=","tree2"===e.treeId&&f?(0,r.jsxs)("span",{className:"font-mono text-purple-300",style:{fontFamily:"Cambria, Georgia, serif"},children:[" ",(0,r.jsx)("b",{children:"Δ"}),"\xb7(",f.left-1,") = ",e.delta]}):(0,r.jsxs)("span",{className:"font-mono text-blue-300",style:{fontFamily:"Cambria, Georgia, serif"},children:[" ",(0,r.jsx)("b",{children:"Δ"})," = ",e.delta]})]})})]},t)}),u.length>3&&(0,r.jsxs)("div",{className:"text-gray-500 text-center",children:["...and ",u.length-3," more"]})]})]})]})}),!1]})}let R=T-F-G-10-20,_=new Map;if(null==f?void 0:f.steps[j]){let e=f.steps[j];if(e.operation.includes("+=")){let t=e.operation.match(/\+=\s*(-?\d+)/);if(t){let s=parseInt(t[1]);_.set(e.index,s)}}}let L=e=>(e+15+R)/2,U=new Map;if(f&&u.length>0){let e=new Map;N.forEach((t,s)=>e.set(s,t));for(let t=0;t<=j&&t<u.length;t++){let s=u[t];if(s&&!s.isQuery){var O;let t=s.index,r=e.get(t)||0,l=null!==(O=s.newValue)&&void 0!==O?O:r+(s.delta||0);U.has(t)||U.set(t,[N[t]||0]),U.get(t).push(l),e.set(t,l)}}}let P=t.length-1,V=T,Z=0;return 4===P?(Z=280,V=1.8*T):8===P?(Z=280,V=1.6*T):16===P?(Z=50,V=.9*T):32===P?(Z=-100,V=.4*T):P>=64&&(Z=-400,V=.2*T),(0,r.jsxs)("div",{className:"w-full max-w-full overflow-x-auto",children:[(0,r.jsxs)("svg",{width:"100%",height:V,viewBox:"0 0 ".concat(I," ").concat(V),className:"w-full",preserveAspectRatio:"xMidYMid meet",children:[(0,r.jsxs)("defs",{children:[(0,r.jsx)("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:(0,r.jsx)("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#1f2937",strokeWidth:"0.5"})}),(0,r.jsxs)("filter",{id:"glow",children:[(0,r.jsx)("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),(0,r.jsxs)("feMerge",{children:[(0,r.jsx)("feMergeNode",{in:"coloredBlur"}),(0,r.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,r.jsxs)("filter",{id:"strongGlow",children:[(0,r.jsx)("feGaussianBlur",{stdDeviation:"8",result:"coloredBlur"}),(0,r.jsxs)("feMerge",{children:[(0,r.jsx)("feMergeNode",{in:"coloredBlur"}),(0,r.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,r.jsxs)("filter",{id:"greenGlow",x:"-100%",y:"-100%",width:"300%",height:"300%",children:[(0,r.jsx)("feGaussianBlur",{stdDeviation:"8",result:"coloredBlur"}),(0,r.jsx)("feFlood",{floodColor:"#22c55e",floodOpacity:"0.9",result:"greenColor"}),(0,r.jsx)("feComposite",{in:"greenColor",in2:"coloredBlur",operator:"in",result:"coloredGlow"}),(0,r.jsxs)("feMerge",{children:[(0,r.jsx)("feMergeNode",{in:"coloredGlow"}),(0,r.jsx)("feMergeNode",{in:"coloredGlow"}),(0,r.jsx)("feMergeNode",{in:"coloredGlow"}),(0,r.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,r.jsxs)("filter",{id:"redGlow",x:"-100%",y:"-100%",width:"300%",height:"300%",children:[(0,r.jsx)("feGaussianBlur",{stdDeviation:"8",result:"coloredBlur"}),(0,r.jsx)("feFlood",{floodColor:"#ef4444",floodOpacity:"0.9",result:"redColor"}),(0,r.jsx)("feComposite",{in:"redColor",in2:"coloredBlur",operator:"in",result:"coloredGlow"}),(0,r.jsxs)("feMerge",{children:[(0,r.jsx)("feMergeNode",{in:"coloredGlow"}),(0,r.jsx)("feMergeNode",{in:"coloredGlow"}),(0,r.jsx)("feMergeNode",{in:"coloredGlow"}),(0,r.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,r.jsxs)("pattern",{id:"diagonalSplit",x:"0",y:"0",width:"1",height:"1",patternUnits:"objectBoundingBox",children:[(0,r.jsx)("polygon",{points:"0,0 1,0 0,1",fill:"#22c55e",fillOpacity:"0.3"}),(0,r.jsx)("polygon",{points:"1,0 1,1 0,1",fill:"#ef4444",fillOpacity:"0.3"}),(0,r.jsx)("line",{x1:"0",y1:"1",x2:"1",y2:"0",stroke:"#fbbf24",strokeWidth:"0.03",opacity:"0.8"})]})]}),(0,r.jsxs)("g",{transform:"translate(0, ".concat(Z,")"),children:[(0,r.jsxs)("g",{transform:"translate(20, -250)",children:[(0,r.jsx)("text",{x:"0",y:"0",fill:"#d1d5db",fontSize:"20",fontWeight:"bold",filter:"url(#glow)",children:"Legend:"}),(0,r.jsxs)("g",{transform:"translate(0, 10)",children:[(0,r.jsx)("circle",{cx:"12",cy:"18",r:"9",fill:"#4b5563",filter:"url(#glow)"}),(0,r.jsx)("text",{x:"26",y:"26",fill:"#d1d5db",fontSize:"18",children:"Normal"}),(0,r.jsx)("circle",{cx:"102",cy:"18",r:"9",fill:"#3b82f6",stroke:"#60a5fa",strokeWidth:"3",filter:"url(#glow)"}),(0,r.jsx)("text",{x:"115",y:"26",fill:"#d1d5db",fontSize:"18",children:"Active"}),(0,r.jsx)("circle",{cx:"182",cy:"18",r:"9",fill:"rgba(251, 191, 36, 0.3)",stroke:"#fbbf24",strokeWidth:"3",filter:"url(#glow)"}),(0,r.jsx)("text",{x:"194",y:"26",fill:"#d1d5db",fontSize:"18",children:"Querying"}),(0,r.jsx)("circle",{cx:"290",cy:"18",r:"9",fill:"rgba(34, 197, 94, 0.3)",stroke:"#22c55e",strokeWidth:"3",filter:"url(#glow)"}),(0,r.jsx)("text",{x:"304",y:"26",fill:"#d1d5db",fontSize:"18",children:"Updated +"}),(0,r.jsx)("circle",{cx:"410",cy:"18",r:"9",fill:"rgba(239, 68, 68, 0.3)",stroke:"#ef4444",strokeWidth:"3",filter:"url(#glow)"}),(0,r.jsx)("text",{x:"424",y:"26",fill:"#d1d5db",fontSize:"18",children:"Updated -"}),(0,r.jsxs)("g",{transform:"translate(540, 18)",children:[(0,r.jsx)("path",{d:"M -9,-9 A 9,9 0 0,0 -9,9 Z",fill:"rgba(34, 197, 94, 0.3)",stroke:"#22c55e",strokeWidth:"3",filter:"url(#glow)"}),(0,r.jsx)("path",{d:"M -9,-9 A 9,9 0 0,1 -9,9 Z",fill:"rgba(239, 68, 68, 0.3)",stroke:"#ef4444",strokeWidth:"3",filter:"url(#glow)"}),(0,r.jsx)("line",{x1:"-9",y1:"-9",x2:"-9",y2:"9",stroke:"#fbbf24",strokeWidth:"3"})]}),(0,r.jsx)("text",{x:"545",y:"26",fill:"#d1d5db",fontSize:"18",children:"Updated +/-"})]})]}),Q.map(e=>{let t=n.includes(e.index),l=d.includes(e.index),o=s.includes(e.index),c=a.includes(e.index),x=i.includes(e.index),p=C.has(e.index)?S.get(e.index):void 0,g=D.get(e.index),m=C.has(e.index),u="rgba(75, 85, 99, 0.1)",b="#4b5563",y=1,f=m&&g&&g.hasPositive&&g.hasNegative,j=m&&g&&g.hasPositive&&!g.hasNegative,v=m&&g&&!g.hasPositive&&g.hasNegative;c||t?(u="rgba(234, 179, 8, 0.15)",b="#eab308",y=2):l||x?(f?(u="url(#diagonalSplit)",b="#d97706"):void 0!==p&&p>0?(u="rgba(34, 197, 94, 0.15)",b="#22c55e"):void 0!==p&&p<0?(u="rgba(239, 68, 68, 0.15)",b="#ef4444"):(u="rgba(59, 130, 246, 0.15)",b="#3b82f6"),y=2):f?(u="url(#diagonalSplit)",b="#d97706",y=2):j?(u="rgba(34, 197, 94, 0.15)",b="#22c55e",y=2):v?(u="rgba(239, 68, 68, 0.15)",b="#ef4444",y=2):o&&(u="rgba(59, 130, 246, 0.15)",b="#3b82f6",y=2);let w=l||x||c||t;if(f){let t=e.x,s=e.y,l=e.width,a=e.height;return(0,r.jsxs)("g",{children:[(0,r.jsx)("rect",{x:t,y:s,width:l,height:a,fill:"none",stroke:"#d97706",strokeWidth:"2",rx:"4"}),(0,r.jsx)(h.E.polygon,{points:"".concat(t,",").concat(s," ").concat(t+l,",").concat(s," ").concat(t,",").concat(s+a),fill:"rgba(34, 197, 94, 0.25)",filter:w?"url(#strongGlow)":"url(#glow)",initial:{opacity:0},animate:{opacity:1},transition:{delay:.01*e.index,duration:.3}}),(0,r.jsx)(h.E.polygon,{points:"".concat(t+l,",").concat(s," ").concat(t+l,",").concat(s+a," ").concat(t,",").concat(s+a),fill:"rgba(239, 68, 68, 0.25)",filter:w?"url(#strongGlow)":"url(#glow)",initial:{opacity:0},animate:{opacity:1},transition:{delay:.01*e.index,duration:.3}}),(0,r.jsx)("line",{x1:t,y1:s+a,x2:t+l,y2:s,stroke:"#fbbf24",strokeWidth:"1.5",opacity:"0.6"})]},"block-".concat(e.index))}return(0,r.jsx)(h.E.rect,{x:e.x,y:e.y,width:e.width,height:e.height,fill:u,stroke:b,strokeWidth:y,rx:"4",filter:w?"url(#strongGlow)":"url(#glow)",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:w?[1,1.03,1]:1},transition:{delay:.01*e.index,duration:w?.25:.3,scale:{repeat:w?1:0,duration:.25}}},"block-".concat(e.index))}),t.map((e,t)=>{if(0===t)return null;let l=E(t);if(!l)return null;let n=z(t),d=z(l),o=s.includes(t)||s.includes(l),c=a.includes(t)||a.includes(l),x=i.includes(t)||i.includes(l),p=(n.y+d.y)/2,g=.3*Math.abs(n.x-d.x),m="M ".concat(n.x,",").concat(n.y," Q ").concat(n.x,",").concat(p-g," ").concat(d.x,",").concat(d.y),u="#374151",b=2,y=.3;return x?(u="#f59e0b",b=3,y=.8):c?(u="#8b5cf6",b=3,y=.8):o&&(u="#3b82f6",b=3,y=.8),(0,r.jsx)(h.E.path,{d:m,stroke:u,strokeWidth:b,fill:"none",opacity:y,filter:o||c||x?"url(#strongGlow)":"url(#glow)",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:y},transition:{duration:.5,delay:.05*t}},"edge-".concat(t,"-").concat(l))}),t.map((e,t)=>{let l;if(0===t)return null;let x=z(t),h=s.includes(t),g=a.includes(t),m=i.includes(t),u=n.includes(t),b=d.includes(t),y=N[t],f=U.get(t);if(f&&f.length>1)l=f[f.length-1];else{var j;l=null!==(j=N[t])&&void 0!==j?j:e}return(0,r.jsx)(p,{index:t,value:l,x:x.x,y:x.y,isActive:h,isQuerying:g,isUpdating:m,isAccumulated:u,isUpdated:b,showBinary:o,showNodeIndex:c,previousValue:y,changelogY:L(x.y),actualDelta:_.get(t),intermediateValues:U.get(t)},t)}),u.length>0&&f&&(()=>{let e=u.slice(0,j+1),t=new Map;return e.forEach(e=>{t.has(e.index)||t.set(e.index,[]),t.get(e.index).push(e)}),(0,r.jsx)("g",{children:Array.from(t.entries()).map(e=>{let t,s,[l,a]=e,i=z(l),n=a.some(e=>!e.isQuery&&e.delta&&e.delta>0),d=a.some(e=>!e.isQuery&&e.delta&&e.delta<0);a.some(e=>e.isQuery)?(t="#eab308",s="rgba(234, 179, 8, 0.3)"):n&&d?(t="#d97706",s="url(#diagonalSplit)"):n?(t="#22c55e",s="rgba(34, 197, 94, 0.3)"):d?(t="#ef4444",s="rgba(239, 68, 68, 0.3)"):(t="#6b7280",s="rgba(107, 114, 128, 0.3)");let o=null==f?void 0:f.steps[j],c=(null==o?void 0:o.index)===l,x=Math.max(T-F-G-40,i.y+120);return(0,r.jsxs)("g",{children:[c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("line",{x1:i.x,y1:i.y+20,x2:i.x,y2:x,stroke:"#fbbf24",strokeWidth:"5",opacity:"0.3",strokeDasharray:"4 2",filter:"url(#strongGlow)"}),(0,r.jsx)("line",{x1:i.x,y1:i.y+20,x2:i.x,y2:x,stroke:"#fbbf24",strokeWidth:"2.5",opacity:"0.9",strokeDasharray:"4 2"})]}):(0,r.jsx)("line",{x1:i.x,y1:i.y+20,x2:i.x,y2:x,stroke:"#374151",strokeWidth:"1.5",opacity:"0.5"}),n&&d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M ".concat(i.x,",").concat(x-28," A ").concat(28,",").concat(28," 0 0,0 ").concat(i.x,",").concat(x+28," Z"),fill:"rgba(34, 197, 94, 0.3)",stroke:"#22c55e",strokeWidth:"2.5",filter:"url(#glow)"}),(0,r.jsx)("path",{d:"M ".concat(i.x,",").concat(x-28," A ").concat(28,",").concat(28," 0 0,1 ").concat(i.x,",").concat(x+28," Z"),fill:"rgba(239, 68, 68, 0.3)",stroke:"#ef4444",strokeWidth:"2.5",filter:"url(#glow)"}),(0,r.jsx)("line",{x1:i.x,y1:x-28,x2:i.x,y2:x+28,stroke:"#d97706",strokeWidth:"3"})]}):(0,r.jsx)("circle",{cx:i.x,cy:x,r:28,fill:s,stroke:t,strokeWidth:"2.5",filter:"url(#glow)"}),(0,r.jsxs)("text",{x:i.x,y:x+7,textAnchor:"middle",fill:"white",fontSize:"18",fontWeight:"bold",filter:"url(#glow)",children:["[",l,"]"]}),(()=>{var e;let t=null!==(e=a[a.length-1].newValue)&&void 0!==e?e:0;if(a.length>0&&a[0].isQuery){let e=t>0?"url(#greenGlow)":t<0?"url(#redGlow)":"url(#glow)",s=t>0?"#3b82f6":t<0?"#2563eb":"#3b82f6";return(0,r.jsx)("text",{x:i.x,y:x+28+30,textAnchor:"middle",fill:s,fontSize:"28",fontWeight:"bold",filter:e,children:t},"query-result-".concat(l))}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("text",{x:i.x,y:x+28+30,textAnchor:"middle",fill:"#fbbf24",fontSize:"20",fontWeight:"bold",filter:"url(#glow)",children:[t," ="]},"change-final-".concat(l)),a.map((e,t)=>{let s,a;let n=x+28+30+(t+1)*38;return s=e.isQuery?"#fbbf24":e.delta&&e.delta>0?"#34d399":e.delta&&e.delta<0?"#f87171":"#9ca3af",a=e.isQuery?"+".concat(e.newValue):e.delta&&e.delta>0?"+".concat(e.delta):"".concat(e.delta),(0,r.jsxs)("g",{children:[(0,r.jsx)("text",{x:i.x,y:n,textAnchor:"middle",fill:s,fontSize:"20",fontWeight:"bold",filter:"url(#glow)",style:{cursor:"pointer"},onMouseEnter:()=>w({index:l,entryIdx:t}),onMouseLeave:()=>w(null),children:a}),(null==v?void 0:v.index)===l&&(null==v?void 0:v.entryIdx)===t&&(0,r.jsxs)("g",{children:[(0,r.jsx)("rect",{x:i.x+40,y:n-22,width:140,height:40,fill:"rgba(0, 0, 0, 0.9)",stroke:s,strokeWidth:"2",rx:"6",filter:"url(#glow)"}),(0,r.jsx)("text",{x:i.x+110,y:n,textAnchor:"middle",fill:"white",fontSize:"16",fontWeight:"normal",children:"".concat(e.oldValue,"→").concat(e.newValue)})]})]},"change-text-".concat(t))})]})})()]},"changelog-".concat(l))})})})(),b.length>0&&(0,r.jsxs)("g",{children:[(0,r.jsx)("text",{x:I/2,y:T-G-10+50,textAnchor:"middle",fill:"#c4b5fd",fontSize:"16",fontWeight:"bold",filter:"url(#glow)",children:"\uD83D\uDCCA Reconstructed Array Values"}),(0,r.jsx)("g",{transform:"translate(0,120)",children:b.map((e,t)=>{let s=t+1,l=z(s),a=T-G-10+75;return(0,r.jsxs)("g",{children:[(0,r.jsx)("rect",{x:l.x-50,y:a,width:100,height:40,fill:"rgba(139, 92, 246, 0.15)",stroke:"#a78bfa",strokeWidth:"2",rx:"6"}),(0,r.jsx)("text",{x:l.x,y:a+16,textAnchor:"middle",fill:"#c4b5fd",fontSize:"13",children:s}),(0,r.jsx)("text",{x:l.x,y:a+32,textAnchor:"middle",fill:"#ddd6fe",fontSize:"18",fontWeight:"bold",children:e})]},"prefix-".concat(t))})}),(0,r.jsx)("g",{transform:"translate(0, ".concat(T-G-10+80,")"),children:(()=>{let e=Math.max(...b,1),t=Math.min(...b,0),s=Array.from(new Set(b)).sort((e,t)=>e-t);return(0,r.jsxs)(r.Fragment,{children:[s.map(s=>{let l=80-(s-t)/(e-t||1)*80;return(0,r.jsxs)("g",{children:[(0,r.jsx)("line",{x1:70,y1:l,x2:I-70,y2:l,stroke:"#a78bfa",strokeWidth:"1",strokeDasharray:"4 4",opacity:"0.3"}),(0,r.jsx)("text",{x:60,y:l+4,textAnchor:"end",fill:"#c4b5fd",fontSize:"11",children:s})]},"gridline-".concat(s))}),(0,r.jsx)("path",{d:b.map((s,r)=>{let l=z(r+1);return"".concat(0===r?"M":"L"," ").concat(l.x,",").concat(80-(s-t)/(e-t||1)*80)}).join(" "),fill:"none",stroke:"#a78bfa",strokeWidth:"3",filter:"url(#glow)"}),b.map((s,l)=>{let a=z(l+1);return(0,r.jsx)("circle",{cx:a.x,cy:80-(s-t)/(e-t||1)*80,r:"5",fill:"#a78bfa",stroke:"#ddd6fe",strokeWidth:"2",filter:"url(#glow)"},"plot-".concat(l))})]})})()})]})]})]}),b&&0!==b.length?(0,r.jsx)("div",{className:"mt-4 bg-gradient-to-br from-gray-900/90 to-gray-800/90 rounded-xl p-4 border border-gray-700/50 backdrop-blur-md",children:(0,r.jsxs)("div",{className:"text-sm text-gray-200 space-y-3",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("span",{className:"font-bold text-purple-400 text-lg",children:"\uD83C\uDF0A The Difference Array Trick"}),(0,r.jsx)("div",{className:"text-gray-400 text-xs mt-1",children:"How to update ranges efficiently"})]}),(0,r.jsxs)("div",{className:"bg-purple-900/20 rounded-lg p-4 border border-purple-500/30 shadow-lg",children:[(0,r.jsx)("div",{className:"font-bold text-purple-300 mb-3 text-sm",children:"\uD83D\uDCA1 The Big Idea"}),(0,r.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,r.jsxs)("div",{className:"bg-purple-950/40 rounded px-3 py-2",children:[(0,r.jsx)("div",{className:"text-purple-200 font-semibold mb-1 text-[13px]",children:"1. What we want to do:"}),(0,r.jsxs)("div",{className:"text-gray-300 space-y-1 text-[13px]",children:[(0,r.jsxs)("div",{children:["Instead of storing actual values, store ",(0,r.jsx)("b",{children:"changes (Δ)"})," at each position:"]}),(0,r.jsxs)("div",{className:"ml-3 text-gray-400",children:["• Start with: ",(0,r.jsx)("i",{children:"A"})," = [0, 0, 0, 0, 0, 0]"]}),(0,r.jsx)("div",{className:"ml-3 text-gray-400",children:"• Update range [2, 4] by +3"}),(0,r.jsxs)("div",{className:"ml-3 text-green-300 font-mono",children:["• We want: ",(0,r.jsx)("i",{children:"A"})," = [0, ",(0,r.jsx)("span",{className:"text-green-400",children:"3, 3, 3"}),", 0, 0]"]})]})]}),(0,r.jsxs)("div",{className:"bg-purple-950/40 rounded px-3 py-2",children:[(0,r.jsx)("div",{className:"text-purple-200 font-semibold mb-1 text-[13px]",children:"2. The trick – just mark the boundaries!"}),(0,r.jsxs)("div",{className:"text-gray-300 space-y-1 text-[13px]",children:[(0,r.jsx)("div",{children:"We only need to update 2 positions:"}),(0,r.jsxs)("div",{className:"ml-3 font-mono text-[12px] bg-black/30 p-2 rounded space-y-0.5",children:[(0,r.jsxs)("div",{className:"text-gray-400",children:[(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:"Δ"})," array:  [0,  0,  0,  0,  0,  0]"]}),(0,r.jsxs)("div",{className:"text-green-400",children:[(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:"Δ"}),"[",(0,r.jsx)("i",{children:"L"}),"] += ",(0,r.jsx)("span",{className:"text-green-300",style:{textShadow:"0 0 5px rgba(134,239,172,0.3)",fontWeight:"bold"},children:"Δ"}),"   [0,  ",(0,r.jsx)("span",{className:"text-green-400 font-bold",style:{textShadow:"0 0 5px rgba(74,222,128,0.3)"},children:"+3"}),",  0,  0,  0,  0]  ← Range start"]}),(0,r.jsxs)("div",{className:"text-red-400",children:[(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:"Δ"}),"[",(0,r.jsx)("i",{children:"R"}),"+1] -= ",(0,r.jsx)("span",{className:"text-red-300",style:{textShadow:"0 0 5px rgba(252,165,165,0.3)",fontWeight:"bold"},children:"Δ"})," [0,  ",(0,r.jsx)("span",{className:"text-green-400 font-bold",style:{textShadow:"0 0 5px rgba(74,222,128,0.3)"},children:"+3"}),",  0,  0, ",(0,r.jsx)("span",{className:"text-red-400 font-bold",style:{textShadow:"0 0 5px rgba(248,113,113,0.3)"},children:"-3"}),",  0]  ← Range end"]})]}),(0,r.jsxs)("div",{className:"text-gray-400 text-[12px] mt-2",children:["Reconstruct via prefix sum: ",(0,r.jsxs)("span",{className:"font-mono",style:{fontFamily:"Cambria, Georgia, serif"},children:[(0,r.jsxs)("span",{className:"text-cyan-300",style:{textShadow:"0 0 5px rgba(103,232,249,0.3)"},children:["A[",(0,r.jsx)("i",{children:"i"}),"]"]})," = ",(0,r.jsxs)("span",{style:{fontSize:"18px",position:"relative",display:"inline-block",verticalAlign:"middle",color:"#fbbf24",textShadow:"0 0 5px rgba(251,191,36,0.3)"},children:[(0,r.jsx)("span",{style:{position:"absolute",fontSize:"7px",top:"-7px",right:"-2px"},children:(0,r.jsx)("i",{children:"i"})}),(0,r.jsxs)("span",{style:{position:"absolute",fontSize:"7px",bottom:"-7px",right:"-8px"},children:[(0,r.jsx)("i",{children:"j"}),"=1"]}),"∑"]})," ",(0,r.jsxs)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:["Δ[",(0,r.jsx)("i",{children:"j"}),"]"]})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-purple-950/40 rounded px-3 py-2",children:[(0,r.jsx)("div",{className:"text-purple-200 font-semibold mb-1 text-[13px]",children:"3. How it looks when we sum it up:"}),(0,r.jsx)("div",{className:"text-gray-300",children:(0,r.jsxs)("div",{className:"font-mono text-[11.5px] bg-black/30 p-3 rounded space-y-1",children:[(0,r.jsxs)("div",{className:"text-gray-400",children:["Index ",(0,r.jsx)("i",{children:"i"}),":     1    2    3    4    5    6"]}),(0,r.jsxs)("div",{className:"text-blue-300",children:[(0,r.jsxs)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:["Δ[",(0,r.jsx)("i",{children:"i"}),"]"]}),":       [ 0,  ",(0,r.jsx)("span",{className:"text-green-400 font-bold",style:{textShadow:"0 0 5px rgba(74,222,128,0.3)"},children:"+3"}),",   0,   0,  ",(0,r.jsx)("span",{className:"text-red-400 font-bold",style:{textShadow:"0 0 5px rgba(248,113,113,0.3)"},children:"-3"}),",   0 ]"]}),(0,r.jsx)("div",{className:"border-t border-gray-600 my-1"}),(0,r.jsxs)("div",{className:"text-purple-300",children:[(0,r.jsxs)("span",{className:"text-cyan-300",style:{textShadow:"0 0 5px rgba(103,232,249,0.3)"},children:["A[",(0,r.jsx)("i",{children:"i"}),"]"]}),":       [ 0,  ",(0,r.jsx)("span",{className:"text-purple-400 font-bold",style:{textShadow:"0 0 5px rgba(192,132,252,0.3)"},children:"3"}),",   ",(0,r.jsx)("span",{className:"text-purple-400 font-bold",style:{textShadow:"0 0 5px rgba(192,132,252,0.3)"},children:"3"}),",   ",(0,r.jsx)("span",{className:"text-purple-400 font-bold",style:{textShadow:"0 0 5px rgba(192,132,252,0.3)"},children:"3"}),",   0,   0 ]"]}),(0,r.jsxs)("div",{className:"text-gray-500 text-[11px] mt-1",children:["              └─── Step function: rises at ",(0,r.jsx)("i",{children:"L"}),", drops at ",(0,r.jsx)("i",{children:"R"}),"+1"]})]})})]}),(0,r.jsxs)("div",{className:"bg-purple-950/40 rounded px-3 py-2",children:[(0,r.jsx)("div",{className:"text-purple-200 font-semibold mb-1 text-[13px]",children:"4. Multiple updates? No problem!"}),(0,r.jsxs)("div",{className:"text-gray-300 space-y-1",children:[(0,r.jsx)("div",{className:"text-[13px]",children:"Changes just add up at the boundaries:"}),(0,r.jsxs)("div",{className:"font-mono text-[11.5px] bg-black/30 p-2 rounded space-y-0.5",children:[(0,r.jsxs)("div",{className:"text-green-400",children:["Op 1:   ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:"Δ"})," = [0, ",(0,r.jsx)("span",{className:"font-bold",style:{textShadow:"0 0 5px rgba(74,222,128,0.3)"},children:"+3"}),",  0,  0, ",(0,r.jsx)("span",{className:"font-bold text-red-400",style:{textShadow:"0 0 5px rgba(248,113,113,0.3)"},children:"-3"}),",  0]  → ",(0,r.jsx)("span",{className:"text-cyan-300",style:{textShadow:"0 0 5px rgba(103,232,249,0.3)"},children:"A"})," = [0, 3, 3, 3, 0, 0]"]}),(0,r.jsxs)("div",{className:"text-blue-400",children:["Op 2:   ",(0,r.jsx)("span",{className:"text-pink-300",style:{textShadow:"0 0 4px rgba(249,168,212,0.3)"},children:"Δ"})," = [0, +3, ",(0,r.jsx)("span",{className:"font-bold text-green-400",style:{textShadow:"0 0 5px rgba(74,222,128,0.3)"},children:"+2"}),",  0, -3, ",(0,r.jsx)("span",{className:"font-bold text-red-400",style:{textShadow:"0 0 5px rgba(248,113,113,0.3)"},children:"-2"}),"]  → ",(0,r.jsx)("span",{className:"text-cyan-300",style:{textShadow:"0 0 5px rgba(103,232,249,0.3)"},children:"A"})," = [0, 3, 5, 5, 2, 0]"]})]}),(0,r.jsx)("div",{className:"text-gray-400 text-[12px] ml-3",children:"Deltas accumulate independently at boundaries"})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-900/40 to-pink-900/40 rounded px-3 py-2 border border-purple-400/50",children:[(0,r.jsx)("div",{className:"text-purple-200 font-bold text-center text-[13px]",style:{textShadow:"0 0 6px rgba(216,180,254,0.3)"},children:"\uD83C\uDFAF Why this is awesome:"}),(0,r.jsxs)("div",{className:"text-gray-300 text-[12px] text-center mt-1 space-y-1",children:[(0,r.jsxs)("div",{children:["Only ",(0,r.jsx)("span",{className:"text-yellow-300",style:{textShadow:"0 0 5px rgba(253,224,71,0.3)",fontWeight:"bold"},children:"2 updates"})," per range (start and end), not the whole range!"]}),(0,r.jsx)("div",{children:"Fenwick Tree makes both point updates and prefix sums highly efficient"}),(0,r.jsxs)("div",{className:"text-purple-300 font-mono",style:{fontFamily:"Cambria, Georgia, serif",fontSize:"13px"},children:[(0,r.jsx)("b",{children:"Time:"})," ",(0,r.jsxs)("span",{className:"text-emerald-300",style:{textShadow:"0 0 5px rgba(110,231,183,0.3)"},children:["O(log ",(0,r.jsx)("i",{children:"n"}),")"]})," per update, ",(0,r.jsxs)("span",{className:"text-emerald-300",style:{textShadow:"0 0 5px rgba(110,231,183,0.3)"},children:["O(log ",(0,r.jsx)("i",{children:"n"}),")"]})," per query ✨"]})]})]})]})]})]})}):(0,r.jsx)("div",{className:"mt-4 bg-gradient-to-br from-gray-900/90 to-gray-800/90 rounded-xl p-4 border border-gray-700/50 backdrop-blur-md",children:(0,r.jsxs)("div",{className:"text-sm text-gray-200 space-y-3",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("span",{className:"font-bold text-blue-400 text-2xl",style:{fontFamily:"Georgia, serif"},children:"\uD83D\uDD0D Understanding LSB Operations"}),(0,r.jsx)("div",{className:"text-gray-400 text-sm mt-2",children:"How Fenwick Tree uses bit manipulation"})]}),(0,r.jsxs)("div",{className:"bg-blue-900/20 rounded-lg p-4 border border-blue-500/30 shadow-lg",children:[(0,r.jsxs)("div",{className:"font-bold text-blue-300 mb-3 text-sm",children:["\uD83D\uDCA1 The ",(0,r.jsxs)("span",{style:{fontFamily:"Cambria, Georgia, serif",fontSize:"16px"},children:[(0,r.jsx)("i",{children:"a"})," & −",(0,r.jsx)("i",{children:"a"})]})," Operation"]}),(0,r.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,r.jsxs)("div",{className:"bg-blue-950/40 rounded px-3 py-2",children:[(0,r.jsx)("div",{className:"text-blue-200 font-semibold mb-1 text-[13px]",children:"1. How negative numbers work"}),(0,r.jsxs)("div",{className:"text-gray-300 space-y-1",style:{fontFamily:"Cambria, Georgia, serif",fontSize:"14px"},children:[(0,r.jsx)("div",{children:(0,r.jsxs)("b",{children:["−",(0,r.jsx)("i",{children:"a"})," = ~",(0,r.jsx)("i",{children:"a"})," + 1"]})}),(0,r.jsxs)("div",{className:"text-gray-400 text-[13px] ml-3",children:[(0,r.jsx)("b",{children:"~"}),": bitwise NOT (flip every bit)"]}),(0,r.jsxs)("div",{className:"text-gray-400 text-[13px] ml-3",children:["Why? Because ",(0,r.jsx)("i",{children:"a"})," + ~",(0,r.jsx)("i",{children:"a"})," = 111...111 (each bit is either 1 or 0)"]}),(0,r.jsxs)("div",{className:"text-gray-400 text-[13px] ml-3",children:["So (",(0,r.jsx)("i",{children:"a"})," + ~",(0,r.jsx)("i",{children:"a"}),") + 1 = (1)000...000, which means ~",(0,r.jsx)("i",{children:"a"})," + 1 = −",(0,r.jsx)("i",{children:"a"})]})]})]}),(0,r.jsxs)("div",{className:"bg-blue-950/40 rounded px-3 py-2",children:[(0,r.jsxs)("div",{className:"text-blue-200 font-semibold mb-1 text-[13px]",children:["2. Example: ",(0,r.jsx)("i",{children:"a"})," = 6 (binary: 0110)"]}),(0,r.jsxs)("div",{className:"text-gray-300 font-mono text-[13px] space-y-0.5",children:[(0,r.jsx)("div",{children:"      a  = 0110  (6)"}),(0,r.jsx)("div",{children:"     ~a  = 1001  (bitwise NOT)"}),(0,r.jsx)("div",{children:"   ~a+1 = 1010  (add 1)"}),(0,r.jsx)("div",{className:"border-t border-gray-600 pt-0.5",children:"     -a  = 1010  (−6 in two's complement)"})]})]}),(0,r.jsxs)("div",{className:"bg-blue-950/40 rounded px-3 py-2",children:[(0,r.jsx)("div",{className:"text-blue-200 font-semibold mb-1 text-[13px]",children:"3. Bit Operations:"}),(0,r.jsxs)("div",{className:"text-gray-300 space-y-2.5",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"font-mono text-blue-300",style:{fontFamily:"Cambria, Georgia, serif",fontSize:"16px",minWidth:"90px"},children:(0,r.jsxs)("b",{children:[(0,r.jsx)("i",{children:"a"})," & −",(0,r.jsx)("i",{children:"a"})]})}),(0,r.jsxs)("span",{className:"text-gray-400 text-[13px]",children:["Isolates the ",(0,r.jsx)("b",{children:"lowest set bit (LSB)"})]})]}),(0,r.jsxs)("div",{className:"font-mono text-[13px] ml-2 bg-black/30 p-2.5 rounded",children:[(0,r.jsx)("div",{children:"  a  = 0110  (6)"}),(0,r.jsx)("div",{children:" -a  = 1010  (−6)"}),(0,r.jsx)("div",{className:"text-green-400",children:"a&-a = 0010  (2) ← LSB only!"})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2 mt-2.5",children:[(0,r.jsx)("span",{className:"font-mono text-purple-300",style:{fontFamily:"Cambria, Georgia, serif",fontSize:"16px",minWidth:"90px"},children:(0,r.jsxs)("b",{children:[(0,r.jsx)("i",{children:"a"})," ^ −",(0,r.jsx)("i",{children:"a"})]})}),(0,r.jsxs)("span",{className:"text-gray-400 text-[13px]",children:["Marks all bits ",(0,r.jsx)("b",{children:"above LSB"})," as 1"]})]}),(0,r.jsxs)("div",{className:"font-mono text-[13px] ml-2 bg-black/30 p-2.5 rounded",children:[(0,r.jsx)("div",{children:"  a  = 0110  (6)"}),(0,r.jsx)("div",{children:" -a  = 1010  (−6)"}),(0,r.jsx)("div",{className:"text-purple-400",children:"a^-a = 1100  (12) ← Above LSB!"})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2 mt-2.5",children:[(0,r.jsx)("span",{className:"font-mono text-amber-300",style:{fontFamily:"Cambria, Georgia, serif",fontSize:"16px",minWidth:"90px"},children:(0,r.jsxs)("b",{children:[(0,r.jsx)("i",{children:"a"})," | −",(0,r.jsx)("i",{children:"a"})]})}),(0,r.jsxs)("span",{className:"text-gray-400 text-[13px]",children:["Combines both: ",(0,r.jsx)("b",{children:"(a & −a) + (a ^ −a)"})]})]}),(0,r.jsxs)("div",{className:"font-mono text-[13px] ml-2 bg-black/30 p-2.5 rounded",children:[(0,r.jsx)("div",{children:"  a  = 0110  (6)"}),(0,r.jsx)("div",{children:" -a  = 1010  (−6)"}),(0,r.jsx)("div",{className:"text-amber-400",children:"a|-a = 1110  (14) ← LSB + above!"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-900/40 to-indigo-900/40 rounded px-3 py-2 border border-blue-400/50",children:[(0,r.jsx)("div",{className:"text-blue-200 font-bold text-center text-[13px]",children:"\uD83C\uDFAF How Fenwick Tree uses this:"}),(0,r.jsxs)("div",{className:"text-gray-300 text-[13px] text-center mt-1.5 leading-relaxed",children:[(0,r.jsx)("span",{className:"font-mono text-blue-300",style:{fontFamily:"Cambria, Georgia, serif",fontSize:"15px"},children:(0,r.jsxs)("b",{children:[(0,r.jsx)("i",{children:"a"})," & −",(0,r.jsx)("i",{children:"a"})]})})," gives us the rightmost 1 bit, which tells us how many elements each node covers!",(0,r.jsx)("br",{}),"To update the parent: ",(0,r.jsxs)("span",{className:"font-mono text-blue-300",style:{fontFamily:"Cambria, Georgia, serif",fontSize:"15px"},children:[(0,r.jsx)("i",{children:"next"})," = ",(0,r.jsx)("i",{children:"a"})," + (",(0,r.jsx)("i",{children:"a"})," & −",(0,r.jsx)("i",{children:"a"}),")"]})," (just add the LSB)"]})]})]})]})]})})]})}function m(e){let{tree2D:t,currentOperation:s,currentStep:l,showBinary:a,treeSnapshot2D:i=null}=e,n=t.getTree(),d=i?i.getTree():n,o=t.getRows(),c=t.getCols(),x=54*c,p=54*o,g=(()=>{let e=new Set;return s&&s.steps.slice(0,l+1).forEach(t=>{void 0!==t.x&&void 0!==t.y&&e.add("".concat(t.x,",").concat(t.y))}),e})(),m=(()=>{if(!s||l<0||l>=s.steps.length)return null;let e=s.steps[l];return void 0!==e.x&&void 0!==e.y?{x:e.x,y:e.y}:null})(),u=(()=>{let e=new Set;return!s||l<0||s.steps.slice(0,l).forEach(t=>{void 0!==t.x&&void 0!==t.y&&e.add("".concat(t.x,",").concat(t.y))}),e})(),b=(()=>{if(!s||"2d-rect-query"!==s.type)return null;let{x1:e,y1:t,x2:r,y2:l,subQueries:a}=s;return e&&t&&r&&l&&a?{main:{x1:1,y1:1,x2:r,y2:l,sign:"+",color:"rgba(74, 222, 128, 0.3)"},left:e>1?{x1:1,y1:1,x2:e-1,y2:l,sign:"-",color:"rgba(248, 113, 113, 0.3)"}:null,top:t>1?{x1:1,y1:1,x2:r,y2:t-1,sign:"-",color:"rgba(248, 113, 113, 0.3)"}:null,overlap:e>1&&t>1?{x1:1,y1:1,x2:e-1,y2:t-1,sign:"+",color:"rgba(74, 222, 128, 0.3)"}:null,target:{x1:e,y1:t,x2:r,y2:l,color:"rgba(59, 130, 246, 0.4)"}}:null})();return(0,r.jsxs)("div",{className:"w-full space-y-4",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 rounded-xl p-6 border border-gray-700/50 backdrop-blur-md",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)("svg",{width:x+100,height:p+120,className:"overflow-visible",children:[(0,r.jsx)("g",{children:Array.from({length:c},(e,t)=>(0,r.jsx)("text",{x:50+54*t+25,y:20,textAnchor:"middle",className:"text-xs fill-gray-400 font-mono",children:t+1},"col-".concat(t)))}),(0,r.jsx)("g",{children:Array.from({length:o},(e,t)=>(0,r.jsx)("text",{x:25,y:50+54*t+25+5,textAnchor:"middle",className:"text-xs fill-gray-400 font-mono",children:t+1},"row-".concat(t)))}),b&&(0,r.jsxs)("g",{children:[(0,r.jsx)("rect",{x:50+(b.main.x1-1)*54,y:50+(b.main.y1-1)*54,width:(b.main.x2-b.main.x1+1)*54-4,height:(b.main.y2-b.main.y1+1)*54-4,fill:b.main.color,stroke:"rgba(74, 222, 128, 0.6)",strokeWidth:"2",rx:"4"}),(0,r.jsx)("text",{x:50+54*b.main.x2-15,y:50+54*b.main.y2-10,className:"text-sm fill-green-400 font-bold",children:"+"}),b.left&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:50+(b.left.x1-1)*54,y:50+(b.left.y1-1)*54,width:(b.left.x2-b.left.x1+1)*54-4,height:(b.left.y2-b.left.y1+1)*54-4,fill:b.left.color,stroke:"rgba(248, 113, 113, 0.6)",strokeWidth:"2",strokeDasharray:"4,4",rx:"4"}),(0,r.jsx)("text",{x:50+54*b.left.x2-15,y:50+54*b.left.y2-10,className:"text-sm fill-red-400 font-bold",children:"−"})]}),b.top&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:50+(b.top.x1-1)*54,y:50+(b.top.y1-1)*54,width:(b.top.x2-b.top.x1+1)*54-4,height:(b.top.y2-b.top.y1+1)*54-4,fill:b.top.color,stroke:"rgba(248, 113, 113, 0.6)",strokeWidth:"2",strokeDasharray:"4,4",rx:"4"}),(0,r.jsx)("text",{x:50+54*b.top.x2-15,y:50+54*b.top.y2-10,className:"text-sm fill-red-400 font-bold",children:"−"})]}),b.overlap&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:50+(b.overlap.x1-1)*54,y:50+(b.overlap.y1-1)*54,width:(b.overlap.x2-b.overlap.x1+1)*54-4,height:(b.overlap.y2-b.overlap.y1+1)*54-4,fill:b.overlap.color,stroke:"rgba(74, 222, 128, 0.6)",strokeWidth:"2",rx:"4"}),(0,r.jsx)("text",{x:50+54*b.overlap.x2-15,y:50+54*b.overlap.y2-10,className:"text-sm fill-green-400 font-bold",children:"+"})]}),(0,r.jsx)("rect",{x:50+(b.target.x1-1)*54,y:50+(b.target.y1-1)*54,width:(b.target.x2-b.target.x1+1)*54-4,height:(b.target.y2-b.target.y1+1)*54-4,fill:"none",stroke:"rgba(59, 130, 246, 0.8)",strokeWidth:"3",rx:"4"})]}),Array.from({length:o},(e,t)=>(0,r.jsx)("g",{children:Array.from({length:c},(e,s)=>{var l,i;let o=t+1,c=s+1,x="".concat(o,",").concat(c),p=u.has(x),b=(null==m?void 0:m.x)===o&&(null==m?void 0:m.y)===c,y=(null===(l=n[o])||void 0===l?void 0:l[c])||0,f=(null===(i=d[o])||void 0===i?void 0:i[c])||0,j=p||b?y:f,v=g.has(x);return(0,r.jsxs)("g",{children:[(0,r.jsx)(h.E.rect,{x:50+54*s,y:50+54*t,width:50,height:50,fill:b?"rgba(59, 130, 246, 0.4)":v?"rgba(34, 197, 94, 0.3)":"rgba(55, 65, 81, 0.6)",stroke:b?"rgba(59, 130, 246, 0.8)":v?"rgba(34, 197, 94, 0.6)":"rgba(107, 114, 128, 0.4)",strokeWidth:b?3:v?2:1,rx:"4",animate:{scale:b?1.05:1},transition:{duration:.2}}),(0,r.jsx)("text",{x:50+54*s+25,y:50+54*t+25-(a?5:0),textAnchor:"middle",dominantBaseline:"middle",className:"text-sm font-bold ".concat(j>0?"fill-green-400":j<0?"fill-red-400":"fill-gray-400"),children:j}),a&&(0,r.jsxs)("text",{x:50+54*s+25,y:50+54*t+25+12,textAnchor:"middle",className:"text-[8px] fill-gray-500 font-mono",children:[o.toString(2).padStart(4,"0"),",",c.toString(2).padStart(4,"0")]}),b&&(0,r.jsx)(h.E.circle,{cx:50+54*s+25,cy:50+54*t-5,r:"4",fill:"rgba(59, 130, 246, 0.8)",initial:{scale:0},animate:{scale:[1,1.5,1]},transition:{duration:.6,repeat:1/0}})]},x)})},"row-".concat(t)))]})}),s&&l>=0&&l<s.steps.length&&(0,r.jsx)("div",{className:"mt-6 bg-blue-900/20 rounded-lg p-4 border border-blue-500/30",children:(0,r.jsxs)("div",{className:"text-sm text-gray-200 space-y-2",children:[(0,r.jsxs)("div",{className:"font-bold text-blue-300",children:["Step ",l+1," / ",s.steps.length]}),(0,r.jsx)("div",{className:"font-mono text-xs text-gray-300",children:s.steps[l].description}),(0,r.jsx)("div",{className:"font-mono text-xs text-blue-200",children:s.steps[l].operation})]})}),(null==s?void 0:s.type)==="2d-rect-query"&&(0,r.jsx)("div",{className:"mt-4 bg-gradient-to-br from-emerald-900/20 to-blue-900/20 rounded-lg p-4 border border-emerald-500/30",children:(0,r.jsxs)("div",{className:"text-sm text-gray-200 space-y-2",children:[(0,r.jsx)("div",{className:"font-bold text-emerald-300 text-center",children:"\uD83C\uDFAF Inclusion-Exclusion Principle"}),(0,r.jsxs)("div",{className:"text-xs text-gray-300 space-y-1 font-mono",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-green-400 font-bold",children:"+"}),(0,r.jsxs)("span",{children:["sum(1,1 → ",s.x2,",",s.y2,")"]})]}),s.x1>1&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-red-400 font-bold",children:"−"}),(0,r.jsxs)("span",{children:["sum(1,1 → ",s.x1-1,",",s.y2,")"]})]}),s.y1>1&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-red-400 font-bold",children:"−"}),(0,r.jsxs)("span",{children:["sum(1,1 → ",s.x2,",",s.y1-1,")"]})]}),s.x1>1&&s.y1>1&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-green-400 font-bold",children:"+"}),(0,r.jsxs)("span",{children:["sum(1,1 → ",s.x1-1,",",s.y1-1,")"]})]}),(0,r.jsx)("div",{className:"border-t border-gray-600 mt-2 pt-2",children:(0,r.jsxs)("span",{className:"text-cyan-400 font-bold",children:["Result: ",s.result]})})]})]})})]}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 rounded-xl p-4 border border-gray-700/50 backdrop-blur-md",children:(0,r.jsxs)("div",{className:"text-sm text-gray-200 space-y-2",children:[(0,r.jsx)("div",{className:"font-bold text-purple-400",children:"\uD83D\uDCD0 2D Fenwick Tree"}),(0,r.jsxs)("div",{className:"text-[13px] text-gray-300 space-y-1",children:[(0,r.jsxs)("div",{children:["• ",(0,r.jsx)("b",{children:"Update"}),": Hop through cells using ",(0,r.jsx)("span",{className:"font-mono text-cyan-400",children:"x += x&-x"})," and ",(0,r.jsx)("span",{className:"font-mono text-cyan-400",children:"y += y&-y"})]}),(0,r.jsxs)("div",{children:["• ",(0,r.jsx)("b",{children:"Query"}),": Get prefix sum to (x,y) using ",(0,r.jsx)("span",{className:"font-mono text-cyan-400",children:"x -= x&-x"})," and ",(0,r.jsx)("span",{className:"font-mono text-cyan-400",children:"y -= y&-y"})]}),(0,r.jsxs)("div",{children:["• ",(0,r.jsx)("b",{children:"Rectangle Sum"}),": Use 4 prefix sums with inclusion-exclusion: ",(0,r.jsx)("span",{className:"font-mono text-green-400",children:"A + D - B - C"})]})]})]})})]})}function u(e){let{value:t,maxBits:s}=e,a=t.toString(2).padStart(s,"0"),i=(t^t>>1).toString(2).padStart(s,"0"),n=(t>>1).toString(2).padStart(s,"0"),d=(0,l.useMemo)(()=>{let e=[],r=Math.max(0,t-2),l=Math.min((1<<s)-1,t+2);for(let a=r;a<=l;a++){let r=a.toString(2).padStart(s,"0"),l=(a^a>>1).toString(2).padStart(s,"0");e.push({num:a,bin:r,gray:l,isCurrent:a===t})}return e},[t,s]),o=(0,l.useMemo)(()=>{let e=[];for(let t=0;t<d.length;t++)if(0===t)e.push(0);else{let r=d[t-1].gray,l=d[t].gray,a=0;for(let e=0;e<s;e++)r[e]!==l[e]&&a++;e.push(a)}return e},[d,s]),c=600/d.length;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 rounded-xl p-6 border border-gray-700/50 backdrop-blur-md",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("div",{className:"text-4xl font-bold text-cyan-400 mb-2",children:t}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:"Decimal Value"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-2 text-center",children:"Binary Representation"}),(0,r.jsx)("div",{className:"flex justify-center gap-1",children:a.split("").map((e,t)=>(0,r.jsx)(h.E.div,{className:"w-12 h-12 flex items-center justify-center rounded-lg font-mono text-lg font-bold border-2 ".concat("1"===e?"bg-blue-600/40 border-blue-400/60 text-blue-200":"bg-gray-800/60 border-gray-600/40 text-gray-500"),initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.05*t},children:e},"bin-".concat(t)))}),(0,r.jsx)("div",{className:"flex justify-center gap-1 mt-1",children:a.split("").map((e,t)=>(0,r.jsx)("div",{className:"w-12 text-center text-xs text-gray-500",children:s-t-1},"pos-".concat(t)))})]}),(0,r.jsxs)("div",{className:"mb-6 space-y-3",children:[(0,r.jsx)("div",{className:"text-center text-gray-400 text-sm mb-4",children:(0,r.jsx)("span",{className:"font-mono text-cyan-400",children:"gray = binary ^ (binary >> 1)"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 mb-1 text-center",children:"binary >> 1 (shifted right)"}),(0,r.jsx)("div",{className:"flex justify-center gap-1",children:n.split("").map((e,t)=>(0,r.jsx)("div",{className:"w-12 h-10 flex items-center justify-center rounded font-mono text-sm ".concat("1"===e?"bg-purple-900/40 border border-purple-600/40 text-purple-300":"bg-gray-800/40 border border-gray-700/30 text-gray-600"),children:e},"shifted-".concat(t)))})]}),(0,r.jsx)("div",{className:"text-center text-2xl font-bold text-yellow-400",children:"⊕"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 mb-1 text-center",children:"binary"}),(0,r.jsx)("div",{className:"flex justify-center gap-1",children:a.split("").map((e,t)=>(0,r.jsx)("div",{className:"w-12 h-10 flex items-center justify-center rounded font-mono text-sm ".concat("1"===e?"bg-blue-900/40 border border-blue-600/40 text-blue-300":"bg-gray-800/40 border border-gray-700/30 text-gray-600"),children:e},"bin2-".concat(t)))})]}),(0,r.jsx)("div",{className:"text-center text-2xl font-bold text-green-400",children:"="}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-400 mb-1 text-center font-semibold",children:"Gray Code"}),(0,r.jsx)("div",{className:"flex justify-center gap-1",children:i.split("").map((e,t)=>{let s=a[t]!==n[t];return(0,r.jsxs)(h.E.div,{className:"w-12 h-12 flex items-center justify-center rounded-lg font-mono text-lg font-bold border-2 ".concat("1"===e?"bg-green-600/40 border-green-400/60 text-green-200":"bg-gray-800/60 border-gray-600/40 text-gray-500"),initial:{scale:.8,opacity:0},animate:{scale:s?[1,1.1,1]:1,opacity:1},transition:{delay:.3+.05*t,duration:.3},children:[e,s&&(0,r.jsx)(h.E.div,{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-400 rounded-full",initial:{scale:0},animate:{scale:[0,1.5,1]},transition:{delay:.3+.05*t}})]},"gray-".concat(t))})})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-emerald-900/20 to-blue-900/20 rounded-xl p-6 border border-emerald-500/30 backdrop-blur-md",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-emerald-400",children:"\uD83C\uDFAF Why Adjacent Values Differ by Exactly 1 Bit"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Each Gray code differs from its neighbors by a single bit flip"})]}),(0,r.jsx)("div",{className:"space-y-2",children:d.map((e,t)=>{let l=t>0?d[t-1].gray:null,a=l?e.gray.split("").findIndex((e,t)=>e!==l[t]):-1;return(0,r.jsxs)(h.E.div,{className:"flex items-center gap-4 p-3 rounded-lg transition-all ".concat(e.isCurrent?"bg-cyan-900/40 border-2 border-cyan-400/60":"bg-gray-800/40 border border-gray-700/30"),initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1*t},children:[(0,r.jsx)("div",{className:"w-16 text-center",children:(0,r.jsx)("div",{className:"text-lg font-bold ".concat(e.isCurrent?"text-cyan-300":"text-gray-400"),children:e.num})}),(0,r.jsx)("div",{className:"flex gap-1",children:e.gray.split("").map((e,t)=>(0,r.jsx)("div",{className:"w-8 h-8 flex items-center justify-center rounded font-mono text-sm font-bold ".concat(t===a?"1"===e?"bg-yellow-500/60 border-2 border-yellow-300 text-yellow-100 animate-pulse":"bg-yellow-900/60 border-2 border-yellow-600 text-yellow-300 animate-pulse":"1"===e?"bg-green-600/30 border border-green-500/40 text-green-300":"bg-gray-700/30 border border-gray-600/30 text-gray-500"),children:e},t))}),a>=0&&(0,r.jsxs)("div",{className:"text-xs text-yellow-400 font-semibold",children:["← Bit ",s-a-1," flipped (",o[t]," change",1!==o[t]?"s":"",")"]})]},e.num)})})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 rounded-xl p-6 border border-gray-700/50 backdrop-blur-md",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-purple-400",children:"\uD83D\uDCCA Bit Changes Between Adjacent Values"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:'Always exactly 1 bit flips - perfect for "pulse" encoding'})]}),(0,r.jsxs)("svg",{width:600,height:160,className:"mx-auto",children:[o.map((e,t)=>(0,r.jsxs)("g",{children:[(0,r.jsx)(h.E.rect,{x:t*c+5,y:120-60*e,width:c-10,height:60*e,fill:d[t].isCurrent?"rgba(34, 211, 238, 0.8)":"rgba(168, 85, 247, 0.6)",stroke:d[t].isCurrent?"rgba(34, 211, 238, 1)":"rgba(168, 85, 247, 0.8)",strokeWidth:"2",rx:"4",initial:{scaleY:0},animate:{scaleY:1},transition:{delay:.1*t,duration:.3},style:{transformOrigin:"".concat(t*c+c/2,"px ").concat(120,"px")}}),(0,r.jsx)("text",{x:t*c+c/2,y:140,textAnchor:"middle",className:"text-xs ".concat(d[t].isCurrent?"fill-cyan-400 font-bold":"fill-gray-500"),children:d[t].num}),e>0&&(0,r.jsx)("text",{x:t*c+c/2,y:120-60*e-5,textAnchor:"middle",className:"text-xs fill-purple-300 font-bold",children:e})]},t)),(0,r.jsx)("line",{x1:"0",y1:120,x2:600,y2:120,stroke:"rgba(107, 114, 128, 0.5)",strokeWidth:"2"})]}),(0,r.jsx)("div",{className:"text-center mt-4 text-sm text-gray-400",children:"Notice: Every bar has height 1 (except the first) - only 1 bit changes per increment!"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-900/20 to-purple-900/20 rounded-xl p-6 border border-blue-500/30 backdrop-blur-md",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-blue-400 mb-3",children:"\uD83D\uDCA1 Why This Works"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm text-gray-300",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold text-cyan-400",children:"When we +1 in binary:"}),(0,r.jsxs)("div",{className:"ml-4 mt-1 space-y-1 text-gray-400",children:[(0,r.jsxs)("div",{children:["• The last ",(0,r.jsx)("span",{className:"text-red-400",children:"0"})," and all trailing ",(0,r.jsx)("span",{className:"text-blue-400",children:"1s"})," flip"]}),(0,r.jsxs)("div",{children:["• Example: ",(0,r.jsx)("span",{className:"font-mono",children:"0111"})," → ",(0,r.jsx)("span",{className:"font-mono",children:"1000"})]}),(0,r.jsxs)("div",{className:"ml-4 text-xs",children:["(flip the ",(0,r.jsx)("span",{className:"text-red-400",children:"0"})," and three ",(0,r.jsx)("span",{className:"text-blue-400",children:"1s"})," = 4 changes)"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold text-cyan-400",children:"But in Gray code:"}),(0,r.jsxs)("div",{className:"ml-4 mt-1 space-y-1 text-gray-400",children:[(0,r.jsx)("div",{children:'• XOR with shifted version creates "differential encoding"'}),(0,r.jsxs)("div",{children:["• The same ",(0,r.jsx)("span",{className:"text-red-400",children:"0"}),"→",(0,r.jsx)("span",{className:"text-blue-400",children:"1"})," and trailing ",(0,r.jsx)("span",{className:"text-blue-400",children:"1"}),"→",(0,r.jsx)("span",{className:"text-red-400",children:"0"})," flips cancel out in XOR!"]}),(0,r.jsxs)("div",{children:["• Net result: Only the bit ",(0,r.jsx)("span",{className:"font-semibold text-yellow-400",children:"before"})," the last ",(0,r.jsx)("span",{className:"text-red-400",children:"0"})," changes"]}),(0,r.jsxs)("div",{className:"ml-4 mt-2 p-2 bg-green-900/30 rounded border border-green-600/30",children:[(0,r.jsx)("span",{className:"text-green-300 font-semibold",children:"Same # of ups and downs"})," = they cancel in XOR",(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-yellow-300 font-semibold",children:"Only the boundary bit"})," toggles from no-change → has-change (or vice versa)"]})]})]}),(0,r.jsxs)("div",{className:"pt-3 border-t border-gray-700",children:[(0,r.jsx)("span",{className:"font-semibold text-purple-400",children:"Like our gradient domain mode:"}),(0,r.jsxs)("div",{className:"ml-4 mt-1 text-gray-400",children:["Instead of storing absolute values, we store ",(0,r.jsx)("span",{className:"text-cyan-400 font-semibold",children:"changes/pulses"}),(0,r.jsx)("br",{}),"This makes adjacent values differ minimally - perfect for analog encoding or error correction!"]})]})]})]})]})}var b=s(5095);function y(e){let{steps:t,currentStep:s}=e,l=t[s];return l?(0,r.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 border border-gray-700 shadow-2xl shadow-blue-500/20",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-blue-400 mb-2 drop-shadow-[0_0_10px_rgba(59,130,246,0.5)]",children:["Step ",s+1," of ",t.length]}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:["Current Index: ",(0,r.jsx)("span",{className:"text-white font-mono drop-shadow-lg",children:l.index})]})]}),(0,r.jsx)(b.M,{mode:"wait",children:(0,r.jsxs)(h.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-4",children:[l.binary&&(0,r.jsxs)("div",{className:"bg-gray-800 p-4 rounded border border-gray-700 shadow-lg shadow-gray-900/50",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-2 drop-shadow-lg",children:"Binary Representation:"}),(0,r.jsx)("div",{className:"font-mono text-2xl text-center bg-black/30 py-3 rounded",children:l.binary.split("").map((e,t)=>{let s=l.binary.length-t-1,a=l.lsb>0&&(l.lsb&1<<s)!=0;return(0,r.jsx)(h.E.span,{className:a?"text-green-400 font-bold drop-shadow-[0_0_10px_rgba(34,197,94,0.8)]":"text-white",initial:{scale:1},animate:{scale:a?1.2:1},transition:{duration:.3},children:e},t)})}),(0,r.jsxs)("div",{className:"text-center mt-2 text-sm text-gray-400",children:["Decimal: ",(0,r.jsx)("span",{className:"text-white drop-shadow-lg",children:l.index}),l.lsb>0&&(0,r.jsxs)("span",{className:"ml-4",children:["LSB (a & -a): ",(0,r.jsx)("span",{className:"text-green-400 drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",children:l.lsb})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-900/30 to-purple-900/30 p-4 rounded border border-blue-700/50 shadow-lg shadow-blue-900/30",children:[(0,r.jsx)("div",{className:"text-sm text-blue-300 mb-2 drop-shadow-lg",children:"Operation:"}),(0,r.jsx)("code",{className:"text-white font-mono text-lg block drop-shadow-[0_0_8px_rgba(255,255,255,0.3)]",children:l.operation})]}),(0,r.jsx)("div",{className:"bg-gray-800 p-4 rounded border border-gray-700 shadow-lg shadow-gray-900/50",children:(0,r.jsx)("div",{className:"text-sm text-gray-300 drop-shadow-lg",children:l.description})}),l.lsb>0&&(0,r.jsxs)("div",{className:"bg-gray-800 p-4 rounded border border-gray-700 space-y-2 shadow-lg shadow-gray-900/50",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 drop-shadow-lg",children:"Bit Manipulation:"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm font-mono bg-black/20 p-3 rounded",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400",children:"a:"}),(0,r.jsx)("div",{className:"text-white drop-shadow-lg",children:l.index.toString(2).padStart(8,"0")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400",children:"-a (two's complement):"}),(0,r.jsx)("div",{className:"text-white drop-shadow-lg",children:(-l.index>>>0).toString(2).slice(-8)})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsx)("div",{className:"text-gray-400",children:"a & -a (LSB):"}),(0,r.jsx)("div",{className:"text-green-400 drop-shadow-[0_0_10px_rgba(34,197,94,0.8)]",children:l.lsb.toString(2).padStart(8,"0")})]})]})]}),void 0!==l.newIndex&&(0,r.jsx)(h.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 p-4 rounded border border-green-700/50 shadow-lg shadow-green-900/30",children:(0,r.jsxs)("div",{className:"text-green-400 drop-shadow-[0_0_10px_rgba(34,197,94,0.6)]",children:["➜ Next index: ",(0,r.jsx)("span",{className:"font-mono font-bold",children:l.newIndex})]})})]},s)})]}):null}class f{lsb(e){return e&-e}toBinary(e){return e.toString(2).padStart(8,"0")}update(e,t){let s=[],r=e;for(;r<=this.n;){let e=this.lsb(r),l=r+e;s.push({index:r,operation:"tree[".concat(r,"] += ").concat(t),binary:this.toBinary(r),lsb:e,description:"Update tree[".concat(r,"]. LSB=").concat(e,", next: ").concat(r," + ").concat(e," = ").concat(l),newIndex:l<=this.n?l:void 0}),this.tree[r]+=t,r=l}return{type:"update",index:e,value:t,steps:s}}query(e){let t=[],s=0,r=e;for(;r>0;){let e=this.lsb(r),l=r-e;s+=this.tree[r],t.push({index:r,operation:"sum += tree[".concat(r,"] (").concat(this.tree[r],")"),binary:this.toBinary(r),lsb:e,description:"Read tree[".concat(r,"]=").concat(this.tree[r],". LSB=").concat(e,", next: ").concat(r," - ").concat(e," = ").concat(l),newIndex:l>0?l:void 0}),r=l}return{type:"query",index:e,steps:t,result:s}}rangeQuery(e,t){let s=this.query(t),r=e>1?this.query(e-1):{steps:[],result:0},l=(s.result||0)-(r.result||0);return{type:"query",left:e,right:t,steps:[...s.steps,...r.steps],result:l}}getTree(){return[...this.tree]}getSize(){return this.n}constructor(e){this.n=e,this.tree=Array(e+1).fill(0)}}class j{rangeUpdate(e,t,s){let r=this.diff.update(e,s),l=t<this.diff.getSize()?this.diff.update(t+1,-s):{steps:[]};return{type:"range-update",left:e,right:t,value:s,steps:[...r.steps,...l.steps||[]]}}pointQuery(e){return{...this.diff.query(e),type:"range-query"}}getTree(){return this.diff.getTree()}constructor(e){this.diff=new f(e)}}class v{rangeUpdate(e,t,s){let r=this.tree1.update(e,s),l=t<this.tree1.getSize()?this.tree1.update(t+1,-s):{steps:[]},a=this.tree2.update(e,s*(e-1)),i=t<this.tree2.getSize()?this.tree2.update(t+1,-s*t):{steps:[]},n=[...r.steps,...l.steps||[]].map(e=>({...e,treeId:"tree1"})),d=[...a.steps,...i.steps||[]].map(e=>({...e,treeId:"tree2"})),o=[],c=Math.max(n.length,d.length);for(let e=0;e<c;e++)e<n.length&&o.push(n[e]),e<d.length&&o.push(d[e]);return{type:"range-update",left:e,right:t,value:s,steps:o}}prefixSum(e){let t=this.tree1.query(e).result||0,s=this.tree2.query(e).result||0;return t*e-s}pointQuery(e){return this.prefixSum(e)-(e>1?this.prefixSum(e-1):0)}rangeQuery(e,t){let s=this.tree1.query(t),r=e>1?this.tree1.query(e-1):{steps:[],result:0},l=this.tree2.query(t),a=e>1?this.tree2.query(e-1):{steps:[],result:0},i=this.prefixSum(t)-(e>1?this.prefixSum(e-1):0);return{type:"range-query",left:e,right:t,steps:[...[...s.steps,...r.steps||[]].map(e=>({...e,treeId:"tree1"})),...[...l.steps,...a.steps||[]].map(e=>({...e,treeId:"tree2"}))],result:i}}getTrees(){return{tree1:this.tree1.getTree(),tree2:this.tree2.getTree()}}constructor(e){this.tree1=new f(e),this.tree2=new f(e)}}class w{lsb(e){return e&-e}toBinary(e){return e.toString(2).padStart(8,"0")}update(e,t,s){let r=[],l=e;for(;l<=this.rows;){let e=t,a=this.lsb(l),i=l+a;for(;e<=this.cols;){let t=this.lsb(e),n=e+t;r.push({index:1e3*l+e,x:l,y:e,operation:"tree[".concat(l,"][").concat(e,"] += ").concat(s),binary:this.toBinary(l),xBinary:this.toBinary(l),yBinary:this.toBinary(e),lsb:a,xLsb:a,yLsb:t,description:"Update tree[".concat(l,"][").concat(e,"]. Next: (").concat(i<=this.rows?i:"done",", ").concat(n<=this.cols?n:"done",")"),nextX:i<=this.rows?i:void 0,nextY:n<=this.cols?n:void 0}),this.tree[l][e]+=s,e=n}l=i}return{type:"2d-update",x:e,y:t,value:s,steps:r}}query(e,t){let s=[],r=0,l=e;for(;l>0;){let e=t,a=this.lsb(l),i=l-a;for(;e>0;){let t=this.lsb(e),n=e-t;r+=this.tree[l][e],s.push({index:1e3*l+e,x:l,y:e,operation:"sum += tree[".concat(l,"][").concat(e,"] (").concat(this.tree[l][e],")"),binary:this.toBinary(l),xBinary:this.toBinary(l),yBinary:this.toBinary(e),lsb:a,xLsb:a,yLsb:t,description:"Read tree[".concat(l,"][").concat(e,"]=").concat(this.tree[l][e],". Next: (").concat(i>0?i:"done",", ").concat(n>0?n:"done",")"),nextX:i>0?i:void 0,nextY:n>0?n:void 0}),e=n}l=i}return{type:"2d-query",x:e,y:t,steps:s,result:r}}rectangleQuery(e,t,s,r){let l=this.query(s,r),a=e>1?this.query(e-1,r):{steps:[],result:0},i=t>1?this.query(s,t-1):{steps:[],result:0},n=e>1&&t>1?this.query(e-1,t-1):{steps:[],result:0},d=(l.result||0)-(a.result||0)-(i.result||0)+(n.result||0);return{type:"2d-rect-query",x1:e,y1:t,x2:s,y2:r,steps:[...l.steps,...a.steps,...i.steps,...n.steps],result:d,subQueries:[{...l,type:"2d-query"},{...a,type:"2d-query"},{...i,type:"2d-query"},{...n,type:"2d-query"}]}}getTree(){return this.tree.map(e=>[...e])}getRows(){return this.rows}getCols(){return this.cols}clone(){let e=new w(this.rows,this.cols);return e.tree=this.tree.map(e=>[...e]),e}constructor(e,t){this.rows=e,this.cols=t,this.tree=Array(e+1).fill(0).map(()=>Array(t+1).fill(0))}}function N(){let[e,t]=(0,l.useState)("basic"),[s,h]=(0,l.useState)(16),[p,b]=(0,l.useState)(new f(16)),[N,k]=(0,l.useState)(new j(16)),[S,C]=(0,l.useState)(new v(16)),[D,M]=(0,l.useState)(new w(8,8)),[I,A]=(0,l.useState)({rows:8,cols:8}),[W,B]=(0,l.useState)(null),[F,G]=(0,l.useState)(0),[T,z]=(0,l.useState)(!1),[E,Q]=(0,l.useState)(!0),[q,R]=(0,l.useState)(!0),[_,L]=(0,l.useState)([]),[U,O]=(0,l.useState)([]),[P,V]=(0,l.useState)(0),[Z,Y]=(0,l.useState)([]),[H,X]=(0,l.useState)([]),[J,K]=(0,l.useState)(null),[$,ee]=(0,l.useState)(new Map),[et,es]=(0,l.useState)("5"),[er,el]=(0,l.useState)("3"),[ea,ei]=(0,l.useState)("7"),[en,ed]=(0,l.useState)("3"),[eo,ec]=(0,l.useState)("8"),[ex,eh]=(0,l.useState)("2"),[ep,eg]=(0,l.useState)("3"),[em,eu]=(0,l.useState)("3"),[eb,ey]=(0,l.useState)("5"),[ef,ej]=(0,l.useState)("5"),[ev,ew]=(0,l.useState)("5"),[eN,ek]=(0,l.useState)("2"),[eS,eC]=(0,l.useState)("2"),[eD,eM]=(0,l.useState)("5"),[eI,eA]=(0,l.useState)("5"),[eW,eB]=(0,l.useState)(7),[eF,eG]=(0,l.useState)(8),[eT,ez]=(0,l.useState)([]),[eE,eQ]=(0,l.useState)(!1);(0,l.useEffect)(()=>{eQ(!0),ez(Array.from({length:15},()=>Array.from({length:10},()=>Math.random()>.5?"1":"0").join("")))},[]);let eq=e=>{b(new f(e)),k(new j(e)),C(new v(e)),O([]),L([]),Y([]),X([]),K(null),ee(new Map)},eR=e=>{let t=new f(e);for(let s=1;s<e;s++)t.update(s,1);b(t),k(new j(e)),C(new v(e)),O([]),L([]),Y([]),X([]),K(null),ee(new Map)},e_=e=>{let t=new f(e);for(let s=1;s<e;s++)t.update(s,Math.floor(10*Math.random())+1);b(t),k(new j(e)),C(new v(e)),O([]),L([]),Y([]),X([]),K(null),ee(new Map)},eL=e=>{b(new f(e)),k(new j(e)),C(new v(e)),O([]),L([]),Y([]),X([]),K(null),ee(new Map)},eU=e=>{e<4||e>64||(h(e),eq(e),B(null),G(0),L([]),O([]),Y([]),ee(new Map),z(!1))};(0,l.useEffect)(()=>{eq(16)},[]),(0,l.useEffect)(()=>{ee(new Map),Y([]),B(null),G(0),L([]),O([]),z(!1)},[e]),(0,l.useEffect)(()=>{if(!T||!W)return;let e=setTimeout(()=>{if(F<W.steps.length-1){G(F+1);let e=W.steps[F+1];("query"===W.type||"range-query"===W.type)&&e&&!_.includes(e.index)&&L([..._,e.index]),("update"===W.type||"range-update"===W.type)&&e&&!U.includes(e.index)&&O([...U,e.index])}else z(!1)},2e3);return()=>clearTimeout(e)},[T,F,W,_,U]);let eO=()=>"basic"===e?[...p.getTree()]:"range-update"===e?[...N.getTree()]:[...S.getTrees().tree1],eP=()=>!W||F>=W.steps.length?[]:[W.steps[F].index],eV=W?"update"===W.type||"range-update"===W.type?{updating:eP(),querying:[]}:{updating:[],querying:eP()}:{updating:[],querying:[]};return(0,r.jsxs)("main",{className:"min-h-screen bg-black text-white p-8 relative",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-gradient-radial from-yellow-900/10 via-transparent to-transparent pointer-events-none",style:{background:"radial-gradient(ellipse at top, rgba(212, 175, 55, 0.08), transparent 50%)"}}),(0,r.jsxs)("div",{className:"fixed inset-0 pointer-events-none overflow-hidden opacity-30",children:[(0,r.jsxs)("svg",{className:"absolute inset-0 w-full h-full",children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("pattern",{id:"circuit-grid",x:"0",y:"0",width:"100",height:"100",patternUnits:"userSpaceOnUse",children:[(0,r.jsx)("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"rgba(212, 175, 55, 0.2)",strokeWidth:"1"}),(0,r.jsx)("line",{x1:"50",y1:"0",x2:"50",y2:"100",stroke:"rgba(212, 175, 55, 0.2)",strokeWidth:"1"}),(0,r.jsx)("circle",{cx:"50",cy:"50",r:"3",fill:"rgba(212, 175, 55, 0.4)",children:(0,r.jsx)("animate",{attributeName:"opacity",values:"0.2;0.6;0.2",dur:"3s",repeatCount:"indefinite"})})]})}),(0,r.jsx)("rect",{width:"100%",height:"100%",fill:"url(#circuit-grid)"})]}),eE&&eT.map((e,t)=>(0,r.jsx)("div",{className:"absolute text-xs font-mono text-yellow-500/30",style:{left:"".concat(6.67*t,"%"),top:"-20px",animation:"binaryRain ".concat(5+t%5,"s linear infinite"),animationDelay:"".concat(t%5*1,"s")},children:e},t)),[...Array(8)].map((e,t)=>(0,r.jsx)("div",{className:"absolute text-yellow-600/20 text-2xl font-bold",style:{left:"".concat(10+12*t,"%"),top:"".concat(20+30*Math.sin(t),"%"),animation:"logicGate ".concat(3+2*Math.random(),"s ease-in-out infinite"),animationDelay:"".concat(2*Math.random(),"s")},children:["&","|","⊕","\xac","∧","∨","⊼","⊽"][t]},"gate-".concat(t)))]}),(0,r.jsx)("a",{href:"../../../index.html",className:"fixed top-6 left-6 z-50 px-4 py-2 bg-yellow-900/20 border border-yellow-600/40 text-yellow-500 rounded-lg hover:bg-yellow-900/30 hover:border-yellow-500 hover:shadow-[0_0_20px_rgba(212,175,55,0.4)] transition-all duration-300 backdrop-blur-md",children:"← Back"}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8 relative z-10",children:[(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsx)("h1",{className:"text-5xl font-bold bg-gradient-to-r from-yellow-400 via-yellow-200 to-yellow-400 bg-clip-text text-transparent",style:{textShadow:"0 0 30px rgba(212, 175, 55, 0.6)",fontFamily:"Playfair Display, serif"},children:"Fenwick Tree Visualizer"}),(0,r.jsx)("p",{className:"text-gray-300 text-xl font-semibold",children:"Interactive visualization of Binary Indexed Tree operations"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-900/80 to-black/60 backdrop-blur-md rounded-2xl p-8 border border-yellow-600/30 shadow-lg shadow-yellow-500/10",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-yellow-400 mb-4",style:{fontFamily:"Playfair Display, serif"},children:"Why Fenwick Trees?"}),(0,r.jsxs)("div",{className:"space-y-3 text-gray-300 text-base leading-relaxed",children:[(0,r.jsxs)("p",{children:["The ",(0,r.jsx)("strong",{className:"text-yellow-300",children:"Fenwick Tree"})," (Binary Indexed Tree) is a remarkably compact and well-designed data structure for addressing the",(0,r.jsx)("em",{className:"text-yellow-200",children:" dynamic prefix sum problem: "})," maintain an array that allows efficiently updating any element and querying the sum of any prefix. It maintains an array under point updates while enabling efficient computation of ",(0,r.jsx)("span",{className:"text-yellow-200",children:"prefix aggregates"}),", making it fundamental in a wide range of algorithmic contexts."]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{className:"text-yellow-300",children:"Applications: "}),"Fenwick Trees arise in a surprisingly broad range of contexts:",(0,r.jsx)("span",{className:"text-yellow-100",children:" cumulative frequency tables"}),",",(0,r.jsx)("span",{className:"text-yellow-100",children:" range-sum queries"}),",",(0,r.jsx)("span",{className:"text-yellow-100",children:" coordinate compression"}),",",(0,r.jsx)("span",{className:"text-yellow-100",children:" order statistics"}),",",(0,r.jsx)("span",{className:"text-yellow-100",children:" inversion counting"}),", and even ",(0,r.jsx)("span",{className:"text-yellow-200",children:"2D range queries"})," and",(0,r.jsx)("span",{className:"text-yellow-200",children:" range-update / range-query variants "}),"using dual trees and difference arrays (also called gradient domain and often seen in image processing). What's particularly interesting is that many of its applications are ",(0,r.jsx)("em",{className:"text-yellow-200",children:"not obviously related "}),"to prefix sums at first glance."]}),(0,r.jsxs)("p",{children:["Conceptually, the Fenwick Tree has a close relationship to a",(0,r.jsx)("span",{className:"text-yellow-200",children:" Segment Tree"}),": both organize data into nodes that represent",(0,r.jsx)("span",{className:"text-yellow-200",children:" subranges of different sizes"}),", arranged in a binary-search-like hierarchy. What distinguishes the Fenwick Tree is that it realizes this structure",(0,r.jsx)("em",{className:"text-yellow-200",children:" implicitly"}),", avoiding the overhead of explicit tree navigation while providing notably more concise code for any operation.","This yields advantages in both constant-factor performance and",(0,r.jsx)("span",{className:"text-yellow-200",children:" implementation simplicity"}),", making the Fenwick Tree an elegant alternative when the problem specializes to prefix-style aggregation."]}),(0,r.jsxs)("p",{children:["The magic lies in how each index stores the sum of a range whose length is the ",(0,r.jsx)("strong",{className:"text-yellow-300",children:"lowest set bit"})," of that index. This creates a beautiful structure implicitly encoded in a flat array. The operations are just ",(0,r.jsx)("span",{className:"font-mono text-yellow-200",children:"index \xb1 (index & -index)"}),", exploiting complement arithmetic in binary."]}),(0,r.jsxs)("p",{children:["I was drawn to this structure by its mathematical beauty: elegant bit manipulation, implicit tree encoding, and surprising simplicity for such power. Yet when I first learned it, I found the available references limited. Most provided only static diagrams, some had live demos but the demos lack intuitive visual, leaving much of the operational intuition missing. Several explanations on the ",(0,r.jsx)("span",{className:"text-yellow-200",children:" range-update / range-query "})," formulations were also incomplete or even incorrect."]}),(0,r.jsxs)("p",{children:["This motivated me to build an educational tool that presents the",(0,r.jsx)("strong",{className:"text-yellow-300",children:" Fenwick Tree in motion"}),": a dynamic graph view that reveals how updates propagate, how queries traverse the structure, and how the different Fenwick modes relate. The goal is to make the underlying ideas immediately intuitive and technically precise."]})]})]}),(0,r.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,r.jsxs)("button",{onClick:()=>t("basic"),className:"px-6 py-3 rounded-xl font-semibold transition-all backdrop-blur-md border ".concat("basic"===e?"bg-gradient-to-br from-yellow-900/40 to-yellow-800/40 text-yellow-200 shadow-lg shadow-yellow-500/30 border-yellow-500/60":"bg-gray-900/60 text-gray-400 hover:bg-yellow-900/20 hover:border-yellow-600/30 border-gray-700/50"),children:["Basic Mode",(0,r.jsx)("div",{className:"text-xs mt-1",children:"Point Update + Prefix Query"})]}),(0,r.jsxs)("button",{onClick:()=>t("range-update"),className:"px-6 py-3 rounded-xl font-semibold transition-all backdrop-blur-md border ".concat("range-update"===e?"bg-gradient-to-br from-yellow-900/40 to-yellow-800/40 text-yellow-200 shadow-lg shadow-yellow-500/30 border-yellow-500/60":"bg-gray-900/60 text-gray-400 hover:bg-yellow-900/20 hover:border-yellow-600/30 border-gray-700/50"),children:["Range Update Mode",(0,r.jsx)("div",{className:"text-xs mt-1",children:"Range Update + Point Query"})]}),(0,r.jsxs)("button",{onClick:()=>t("range-range"),className:"px-6 py-3 rounded-xl font-semibold transition-all backdrop-blur-md border ".concat("range-range"===e?"bg-gradient-to-br from-yellow-900/40 to-yellow-800/40 text-yellow-200 shadow-lg shadow-yellow-500/30 border-yellow-500/60":"bg-gray-900/60 text-gray-400 hover:bg-yellow-900/20 hover:border-yellow-600/30 border-gray-700/50"),children:["Dual Tree Mode",(0,r.jsx)("div",{className:"text-xs mt-1",children:"Range Update + Range Query"})]}),(0,r.jsxs)("button",{onClick:()=>t("2d"),className:"px-6 py-3 rounded-xl font-semibold transition-all backdrop-blur-md border ".concat("2d"===e?"bg-gradient-to-br from-yellow-900/40 to-yellow-800/40 text-yellow-200 shadow-lg shadow-yellow-500/30 border-yellow-500/60":"bg-gray-900/60 text-gray-400 hover:bg-yellow-900/20 hover:border-yellow-600/30 border-gray-700/50"),children:["2D Matrix Mode",(0,r.jsx)("div",{className:"text-xs mt-1",children:"2D Fenwick Tree"})]}),(0,r.jsxs)("button",{onClick:()=>t("gray-code"),className:"px-6 py-3 rounded-xl font-semibold transition-all backdrop-blur-md border ".concat("gray-code"===e?"bg-gradient-to-br from-yellow-900/40 to-yellow-800/40 text-yellow-200 shadow-lg shadow-yellow-500/30 border-yellow-500/60":"bg-gray-900/60 text-gray-400 hover:bg-yellow-900/20 hover:border-yellow-600/30 border-gray-700/50"),children:["Gray Code (Related)",(0,r.jsx)("div",{className:"text-xs mt-1",children:"Pulse Encoding"})]})]}),"gray-code"!==e&&(0,r.jsxs)("div",{className:"flex flex-wrap justify-center gap-4",children:["2d"!==e&&(0,r.jsxs)("div",{className:"bg-gray-900/80 backdrop-blur-md rounded-xl p-4 border border-gray-700/50 shadow-lg",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-400 mb-2 text-center",children:["Tree Size: ",s]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:()=>eU(s/2),disabled:s<=4,className:"px-4 py-2 bg-gray-800/60 hover:bg-gray-700/70 backdrop-blur-sm rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2 border border-gray-700/50",children:[(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:"text-blue-400",children:[(0,r.jsx)("path",{d:"M4 8l8-4v8l-8-4z",fill:"currentColor"}),(0,r.jsx)("path",{d:"M4 8l8-4v8l-8-4z",stroke:"currentColor",strokeWidth:"1"})]}),"Halve"]}),(0,r.jsxs)("button",{onClick:()=>eU(2*s),disabled:s>=64,className:"px-4 py-2 bg-gray-800/60 hover:bg-gray-700/70 backdrop-blur-sm rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2 border border-gray-700/50",children:["Double",(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:"text-blue-400",children:[(0,r.jsx)("path",{d:"M12 8L4 4v8l8-4z",fill:"currentColor"}),(0,r.jsx)("path",{d:"M12 8L4 4v8l8-4z",stroke:"currentColor",strokeWidth:"1"})]})]})]})]}),"2d"!==e&&(0,r.jsxs)("div",{className:"bg-gray-900/80 backdrop-blur-md rounded-xl p-4 border border-gray-700/50 shadow-lg",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-2 text-center",children:"Initialize With:"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>eR(s),className:"px-4 py-2 bg-green-900/30 hover:bg-green-900/50 text-green-300 rounded-lg transition-all text-sm backdrop-blur-sm border border-green-700/30",children:"All 1s"}),(0,r.jsx)("button",{onClick:()=>e_(s),className:"px-4 py-2 bg-purple-900/30 hover:bg-purple-900/50 text-purple-300 rounded-lg transition-all text-sm backdrop-blur-sm border border-purple-700/30",children:"Random"}),(0,r.jsx)("button",{onClick:()=>eL(s),className:"px-4 py-2 bg-gray-800/60 hover:bg-gray-700/70 text-gray-300 rounded-lg transition-all text-sm backdrop-blur-sm border border-gray-700/50",children:"All 0s"})]})]})]}),"gray-code"!==e&&(0,r.jsxs)("div",{className:"bg-gray-900 rounded-xl p-6 border border-gray-800 shadow-2xl shadow-blue-500/10",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4 text-blue-400 drop-shadow-[0_0_10px_rgba(59,130,246,0.5)]",style:{fontFamily:"Playfair Display, serif"},children:"Controls"}),"2d"===e?(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-emerald-400",children:"Cell Update"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Row (X)"}),(0,r.jsx)("input",{type:"number",value:ep,onChange:e=>eg(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"1",max:I.rows})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Col (Y)"}),(0,r.jsx)("input",{type:"number",value:em,onChange:e=>eu(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"1",max:I.cols})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm text-gray-400 mb-2",children:[(0,r.jsx)("strong",{children:"Delta"})," ",(0,r.jsx)("span",{className:"text-xs",children:"(+/- change to apply)"})]}),(0,r.jsx)("input",{type:"number",value:eb,onChange:e=>ey(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white"})]}),(0,r.jsxs)("button",{onClick:()=>{let e=parseInt(ep),t=parseInt(em),s=parseInt(eb);e<1||e>I.rows||t<1||t>I.cols||isNaN(s)||(K(D.clone()),B(D.update(e,t,s)),G(0),z(!0),V(e=>e+1))},className:"w-full bg-gradient-to-r from-orange-500/90 to-red-500/90 hover:from-orange-600 hover:to-red-600 text-white font-semibold py-3 rounded-xl transition-all shadow-lg hover:shadow-orange-500/50 flex items-center justify-center gap-2 backdrop-blur-md border border-orange-400/50",children:[(0,r.jsx)(a.Z,{size:20}),"Update Cell"]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-emerald-400",children:"Prefix Query"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Row (X)"}),(0,r.jsx)("input",{type:"number",value:ef,onChange:e=>ej(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"1",max:I.rows})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Col (Y)"}),(0,r.jsx)("input",{type:"number",value:ev,onChange:e=>ew(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"1",max:I.cols})]})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"Query sum from (1,1) to (x,y)"}),(0,r.jsxs)("button",{onClick:()=>{let e=parseInt(ef),t=parseInt(ev);e<1||e>I.rows||t<1||t>I.cols||(K(null),B(D.query(e,t)),G(0),z(!0))},className:"w-full bg-gradient-to-r from-purple-500/90 to-blue-500/90 hover:from-purple-600 hover:to-blue-600 text-white font-semibold py-3 rounded-xl transition-all shadow-lg hover:shadow-purple-500/50 flex items-center justify-center gap-2 backdrop-blur-md border border-purple-400/50",children:[(0,r.jsx)(i.Z,{size:20}),"Prefix Query"]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-emerald-400",children:"Rectangle Query"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"X1"}),(0,r.jsx)("input",{type:"number",value:eN,onChange:e=>ek(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"1",max:I.rows})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Y1"}),(0,r.jsx)("input",{type:"number",value:eS,onChange:e=>eC(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"1",max:I.cols})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"X2"}),(0,r.jsx)("input",{type:"number",value:eD,onChange:e=>eM(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"1",max:I.rows})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Y2"}),(0,r.jsx)("input",{type:"number",value:eI,onChange:e=>eA(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"1",max:I.cols})]})]}),(0,r.jsxs)("button",{onClick:()=>{let e=parseInt(eN),t=parseInt(eS),s=parseInt(eD),r=parseInt(eI);e<1||e>I.rows||t<1||t>I.cols||s<1||s>I.rows||r<1||r>I.cols||e>s||t>r||(K(null),B(D.rectangleQuery(e,t,s,r)),G(0),z(!0))},className:"w-full bg-gradient-to-r from-emerald-500/90 to-teal-500/90 hover:from-emerald-600 hover:to-teal-600 text-white font-semibold py-3 rounded-xl transition-all shadow-lg hover:shadow-emerald-500/50 flex items-center justify-center gap-2 backdrop-blur-md border border-emerald-400/50",children:[(0,r.jsx)(i.Z,{size:20}),"Rectangle Query"]})]})]}):(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-purple-400",children:"basic"===e?"Point Update":"Range Update"}),"basic"===e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Index (1-16)"}),(0,r.jsx)("input",{type:"number",value:et,onChange:e=>es(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"1",max:"16"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm text-gray-400 mb-2",children:[(0,r.jsx)("strong",{children:"Delta"})," ",(0,r.jsx)("span",{className:"text-xs",children:"(+/- change to apply)"})]}),(0,r.jsx)("input",{type:"number",value:er,onChange:e=>el(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Left Index"}),(0,r.jsx)("input",{type:"number",value:en,onChange:e=>ed(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"1",max:"16"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Right Index"}),(0,r.jsx)("input",{type:"number",value:eo,onChange:e=>ec(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"1",max:"16"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm text-gray-400 mb-2",children:[(0,r.jsx)("strong",{children:"Delta"})," ",(0,r.jsx)("span",{className:"text-xs",children:"(+/- change to apply)"})]}),(0,r.jsx)("input",{type:"number",value:ex,onChange:e=>eh(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white"})]})]}),(0,r.jsxs)("button",{onClick:()=>{let t;let r=parseInt(et),l=parseInt(er),a=parseInt(ex);if(!("basic"===e&&(r<1||r>s||isNaN(l)))&&!("basic"!==e&&isNaN(a))){if("range-range"===e){let e=S.getTrees(),s={tree1:[...e.tree1],tree2:[...e.tree2]};(t=S.rangeUpdate(parseInt(en),parseInt(eo),a)).value=a,t.dualTreeSnapshots=s;let r=[],l=new Map($),i=new Map;s.tree1.forEach((e,t)=>i.set(t,e));let n=new Map;s.tree2.forEach((e,t)=>n.set(t,e)),t.steps.forEach(e=>{let t="tree2"===e.treeId?n:i,s=t.get(e.index)||0,a=0;if(e.operation.includes("+=")){let t=e.operation.match(/\+=\s*(-?\d+)/);t&&(a=parseInt(t[1]))}let d=s+a;t.set(e.index,d),r.push({index:e.index,oldValue:s,newValue:d,isQuery:!1,delta:a,treeId:e.treeId}),"".concat(e.treeId,"-").concat(e.index);let o=l.get(e.index)||{hasPositive:!1,hasNegative:!1};a>0&&(o.hasPositive=!0),a<0&&(o.hasNegative=!0),l.set(e.index,o)}),ee(l),Y(r),X([])}else{let s=[...eO()];X(s),(t="basic"===e?p.update(r,l):N.rangeUpdate(parseInt(en),parseInt(eo),a)).value=a;let i=[],n=new Map($),d=new Map;s.forEach((e,t)=>d.set(t,e)),t.steps.forEach(e=>{let t=d.get(e.index)||0,s=0;if(e.operation.includes("+=")){let t=e.operation.match(/\+=\s*(-?\d+)/);t&&(s=parseInt(t[1]))}let r=t+s;d.set(e.index,r),i.push({index:e.index,oldValue:t,newValue:r,isQuery:!1,delta:s});let l=n.get(e.index)||{hasPositive:!1,hasNegative:!1};s>0&&(l.hasPositive=!0),s<0&&(l.hasNegative=!0),n.set(e.index,l)}),ee(n),Y(i)}B(t),G(0),L([]),t.steps.length>0?O([t.steps[0].index]):O([]),z(!0),V(e=>e+1)}},className:"w-full bg-gradient-to-r from-orange-500/90 to-red-500/90 hover:from-orange-600 hover:to-red-600 text-white font-semibold py-3 rounded-xl transition-all shadow-lg hover:shadow-orange-500/50 flex items-center justify-center gap-2 backdrop-blur-md border border-orange-400/50",children:[(0,r.jsx)(a.Z,{size:20}),"basic"===e?"Update Point":"Update Range"]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-purple-400",children:"range-range"===e?"Range Query":"range-update"===e?"Point Query":"Prefix Query"}),"range-range"===e?(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Left Index"}),(0,r.jsx)("input",{type:"number",value:en,onChange:e=>ed(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"1",max:"16"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Right Index"}),(0,r.jsx)("input",{type:"number",value:eo,onChange:e=>ec(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"1",max:"16"})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"range-update"===e?"Point Index (1-16)":"Prefix End Index (1-16)"}),(0,r.jsx)("input",{type:"number",value:ea,onChange:e=>ei(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"1",max:"16"})]}),(0,r.jsxs)("button",{onClick:()=>{let t;let r=parseInt(ea);if(r<1||r>s)return;t="basic"===e?p.query(r):"range-update"===e?N.pointQuery(r):S.rangeQuery(parseInt(en),parseInt(eo));let l=eO(),a=[];if("range-range"===e){let e=S.getTrees();t.dualTreeSnapshots={tree1:[...e.tree1],tree2:[...e.tree2]},t.steps.forEach((t,s)=>{"tree1"===t.treeId?a.push({index:t.index,newValue:e.tree1[t.index],isQuery:!0,delta:0,treeId:"tree1"}):"tree2"===t.treeId&&a.push({index:t.index,newValue:e.tree2[t.index],isQuery:!0,delta:0,treeId:"tree2"})})}else t.steps.forEach((e,t)=>{a.push({index:e.index,newValue:l[e.index],isQuery:!0,delta:0,treeId:e.treeId})});B(t),G(0),t.steps.length>0?L([t.steps[0].index]):L([]),O([]),Y(a),X([]),z(!0)},className:"w-full bg-gradient-to-r from-purple-500/90 to-blue-500/90 hover:from-purple-600 hover:to-blue-600 text-white font-semibold py-3 rounded-xl transition-all shadow-lg hover:shadow-purple-500/50 flex items-center justify-center gap-2 backdrop-blur-md border border-purple-400/50",children:[(0,r.jsx)(i.Z,{size:20}),"Query"]}),(null==W?void 0:W.result)!==void 0&&(0,r.jsx)("div",{className:"bg-gradient-to-br from-green-900/40 to-emerald-900/40 p-6 rounded-xl border border-green-600/50 shadow-lg shadow-green-500/20",children:(0,r.jsxs)("div",{className:"text-green-300",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-green-400/80",children:"Query Result"}),(0,r.jsx)("div",{className:"text-4xl font-bold text-green-300 drop-shadow-[0_0_10px_rgba(74,222,128,0.5)]",children:W.result})]}),(0,r.jsxs)("div",{className:"mt-4 space-y-3 text-sm",children:["basic"===e&&"query"===W.type&&(0,r.jsxs)("div",{className:"bg-black/30 rounded-lg p-4 border border-green-500/30",children:[(0,r.jsx)("div",{className:"font-semibold text-green-300 mb-2",children:"\uD83D\uDCCA Prefix Sum Formula:"}),(0,r.jsxs)("div",{className:"font-mono text-green-200 bg-green-950/40 px-3 py-2 rounded mb-3",children:["prefixSum(",W.index,") = ∑ tree[",W.steps.map(e=>e.index).join(", "),"]"]}),(0,r.jsxs)("div",{className:"text-green-200/90 space-y-1",children:[(0,r.jsx)("div",{className:"font-semibold text-green-300 mb-1",children:"Nodes traversed:"}),W.steps.map((e,t)=>{let s=eO()[e.index];return(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-3",children:[(0,r.jsx)("span",{className:"text-green-400",children:"•"}),(0,r.jsxs)("span",{className:"font-mono",children:["tree[",e.index,"] = ",s]}),(0,r.jsxs)("span",{className:"text-green-500/60 text-xs",children:["(",e.binary,")"]})]},t)})]}),(0,r.jsx)("div",{className:"mt-3 pt-3 border-t border-green-500/30",children:(0,r.jsxs)("div",{className:"font-mono text-green-100 bg-green-900/40 px-3 py-2 rounded",children:["= ",W.steps.map(e=>eO()[e.index]).join(" + ")," = ",(0,r.jsx)("span",{className:"font-bold text-green-300",children:W.result})]})})]}),"range-update"===e&&"range-query"===W.type&&(0,r.jsxs)("div",{className:"bg-black/30 rounded-lg p-4 border border-green-500/30",children:[(0,r.jsx)("div",{className:"font-semibold text-green-300 mb-2",children:"\uD83D\uDCCA Point Query Formula:"}),(0,r.jsxs)("div",{className:"font-mono text-green-200 bg-green-950/40 px-3 py-2 rounded mb-3 text-xs",children:["A[",W.index,"] = prefixSum(tree, ",W.index,")"]}),(0,r.jsxs)("div",{className:"text-green-200/90 space-y-1",children:[(0,r.jsx)("div",{className:"font-semibold text-green-300 mb-1",children:"Nodes traversed:"}),W.steps.map((e,t)=>{let s=eO()[e.index];return(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-3",children:[(0,r.jsx)("span",{className:"text-green-400",children:"•"}),(0,r.jsxs)("span",{className:"font-mono",children:["tree[",e.index,"] = ",s]})]},t)})]}),(0,r.jsx)("div",{className:"mt-3 pt-3 border-t border-green-500/30",children:(0,r.jsxs)("div",{className:"font-mono text-green-100 bg-green-900/40 px-3 py-2 rounded",children:["= ",W.steps.map(e=>eO()[e.index]).join(" + ")," = ",(0,r.jsx)("span",{className:"font-bold text-green-300",children:W.result})]})})]}),"range-range"===e&&"range-query"===W.type&&(()=>{var e,t;let s=W.dualTreeSnapshots;if(!s)return null;let l=W.steps.filter(e=>"tree1"===e.treeId),a=W.steps.filter(e=>"tree2"===e.treeId),i=l.map(e=>s.tree1[e.index]).reduce((e,t)=>e+t,0),n=a.map(e=>s.tree2[e.index]).reduce((e,t)=>e+t,0),d=null!==(t=null!==(e=W.right)&&void 0!==e?e:W.index)&&void 0!==t?t:0;return(0,r.jsxs)("div",{className:"bg-black/30 rounded-lg p-4 border border-green-500/30",children:[(0,r.jsx)("div",{className:"font-semibold text-green-300 mb-3 text-center",children:"\uD83C\uDF33 Dual Tree Formula"}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-950/60 to-purple-950/60 rounded-lg p-3 mb-4 border border-blue-500/30",children:(0,r.jsxs)("div",{className:"text-center font-mono text-green-100 text-base",children:[(0,r.jsxs)("span",{className:"text-blue-300",children:["A[",d,"]"]})," =",(0,r.jsxs)("span",{className:"text-blue-300",children:[" ",d]})," \xd7",(0,r.jsxs)("span",{className:"text-blue-400",children:["prefixSum(Tree1, ",d,")"]})," -",(0,r.jsxs)("span",{className:"text-purple-400",children:["prefixSum(Tree2, ",d,")"]})]})}),(0,r.jsxs)("div",{className:"bg-blue-950/30 rounded-lg p-3 mb-3 border border-blue-500/30",children:[(0,r.jsx)("div",{className:"font-semibold text-blue-300 mb-2",children:"\uD83D\uDD35 Tree 1 (Gradient):"}),(0,r.jsx)("div",{className:"text-sm space-y-1 ml-3",children:l.map((e,t)=>{let l=s.tree1[e.index];return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-blue-400",children:"•"}),(0,r.jsxs)("span",{className:"font-mono text-blue-200",children:["tree1[",e.index,"] = ",l]})]},t)})}),(0,r.jsx)("div",{className:"mt-2 pt-2 border-t border-blue-500/20",children:(0,r.jsxs)("div",{className:"font-mono text-blue-100 text-sm",children:["prefixSum(Tree1) = ",l.map(e=>s.tree1[e.index]).join(" + ")," =",(0,r.jsxs)("span",{className:"font-bold text-blue-300",children:[" ",i]})]})})]}),(0,r.jsxs)("div",{className:"bg-purple-950/30 rounded-lg p-3 mb-3 border border-purple-500/30",children:[(0,r.jsx)("div",{className:"font-semibold text-purple-300 mb-2",children:"\uD83D\uDFE3 Tree 2 (Weighted):"}),(0,r.jsx)("div",{className:"text-sm space-y-1 ml-3",children:a.map((e,t)=>{let l=s.tree2[e.index];return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-purple-400",children:"•"}),(0,r.jsxs)("span",{className:"font-mono text-purple-200",children:["tree2[",e.index,"] = ",l]})]},t)})}),(0,r.jsx)("div",{className:"mt-2 pt-2 border-t border-purple-500/20",children:(0,r.jsxs)("div",{className:"font-mono text-purple-100 text-sm",children:["prefixSum(Tree2) = ",a.map(e=>s.tree2[e.index]).join(" + ")," =",(0,r.jsxs)("span",{className:"font-bold text-purple-300",children:[" ",n]})]})})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-900/50 to-emerald-900/50 rounded-lg p-3 border border-green-500/40",children:[(0,r.jsx)("div",{className:"font-semibold text-green-300 mb-2",children:"✨ Final Computation:"}),(0,r.jsxs)("div",{className:"font-mono text-green-100 text-sm space-y-1",children:[(0,r.jsxs)("div",{children:["= ",d," \xd7 ",i," - ",n]}),(0,r.jsxs)("div",{children:["= ",d*i," - ",n]}),(0,r.jsxs)("div",{className:"text-base font-bold text-green-300 pt-2 border-t border-green-500/30",children:["= ",W.result]})]})]})]})})()]})]})})]})]})]}),"gray-code"===e&&(0,r.jsxs)("div",{className:"bg-gray-900 rounded-xl p-6 border border-gray-800 shadow-2xl shadow-yellow-500/10",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4 text-yellow-400 drop-shadow-[0_0_10px_rgba(234,179,8,0.5)]",style:{fontFamily:"Playfair Display, serif"},children:"Gray Code Controls"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-yellow-400",children:"Decimal Value"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Value (0-255)"}),(0,r.jsx)("input",{type:"number",value:eW,onChange:e=>eB(Math.min(255,Math.max(0,parseInt(e.target.value)||0))),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",min:"0",max:"255"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>eB(Math.max(0,eW-1)),disabled:eW<=0,className:"flex-1 px-4 py-2 bg-gray-800/60 hover:bg-gray-700/70 backdrop-blur-sm rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all border border-gray-700/50",children:"-1"}),(0,r.jsx)("button",{onClick:()=>eB(Math.min(255,eW+1)),disabled:eW>=255,className:"flex-1 px-4 py-2 bg-gray-800/60 hover:bg-gray-700/70 backdrop-blur-sm rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all border border-gray-700/50",children:"+1"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-yellow-400",children:"Bit Width"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Number of Bits"}),(0,r.jsxs)("select",{value:eF,onChange:e=>eG(parseInt(e.target.value)),className:"w-full bg-gray-800 border border-gray-700 rounded px-4 py-2 text-white",children:[(0,r.jsx)("option",{value:"4",children:"4 bits"}),(0,r.jsx)("option",{value:"6",children:"6 bits"}),(0,r.jsx)("option",{value:"8",children:"8 bits"}),(0,r.jsx)("option",{value:"12",children:"12 bits"}),(0,r.jsx)("option",{value:"16",children:"16 bits"})]})]}),(0,r.jsxs)("div",{className:"bg-yellow-900/20 p-3 rounded-lg border border-yellow-600/30 text-sm text-gray-300",children:[(0,r.jsx)("div",{className:"font-semibold text-yellow-400 mb-1",children:"Current:"}),(0,r.jsxs)("div",{children:["Binary: ",(0,r.jsx)("span",{className:"font-mono text-blue-300",children:eW.toString(2).padStart(eF,"0")})]}),(0,r.jsxs)("div",{children:["Gray: ",(0,r.jsx)("span",{className:"font-mono text-green-300",children:(eW^eW>>1).toString(2).padStart(eF,"0")})]})]})]})]})]}),"gray-code"===e?(0,r.jsx)(u,{value:eW,maxBits:eF}):(0,r.jsxs)("div",{className:"bg-gray-900 rounded-xl p-6 border border-gray-800 shadow-2xl shadow-purple-500/10",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-blue-400 drop-shadow-[0_0_10px_rgba(59,130,246,0.5)]",style:{fontFamily:"Playfair Display, serif"},children:"2d"===e?"Matrix Visualization":"Tree Visualization"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:["2d"!==e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-gray-400 cursor-pointer hover:text-gray-300 transition-colors",children:[(0,r.jsx)("input",{type:"checkbox",checked:E,onChange:e=>Q(e.target.checked),className:"w-5 h-5 rounded border-2 border-gray-600 bg-gray-800/60 checked:bg-blue-600 checked:border-blue-500 focus:ring-2 focus:ring-blue-500/50 cursor-pointer transition-all"}),"Show Binary Representation"]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-gray-400 cursor-pointer hover:text-gray-300 transition-colors",children:[(0,r.jsx)("input",{type:"checkbox",checked:q,onChange:e=>R(e.target.checked),className:"w-5 h-5 rounded border-2 border-gray-600 bg-gray-800/60 checked:bg-blue-600 checked:border-blue-500 focus:ring-2 focus:ring-blue-500/50 cursor-pointer transition-all"}),"Show Node Index [i]"]})]}),"2d"===e&&(0,r.jsxs)("label",{className:"flex items-center gap-2 text-gray-400 cursor-pointer hover:text-gray-300 transition-colors",children:[(0,r.jsx)("input",{type:"checkbox",checked:E,onChange:e=>Q(e.target.checked),className:"w-5 h-5 rounded border-2 border-gray-600 bg-gray-800/60 checked:bg-blue-600 checked:border-blue-500 focus:ring-2 focus:ring-blue-500/50 cursor-pointer transition-all"}),"Show Binary"]}),(0,r.jsxs)("button",{onClick:()=>{b(new f(16)),k(new j(16)),C(new v(16)),M(new w(I.rows,I.cols)),B(null),G(0),L([]),O([]),Y([]),X([]),K(null),ee(new Map),z(!1)},className:"px-4 py-2 bg-gray-800/60 hover:bg-gray-700/70 backdrop-blur-sm rounded-lg flex items-center gap-2 transition-all border border-gray-700/50",children:[(0,r.jsx)(n.Z,{size:18}),"Reset"]})]})]}),"2d"===e?(0,r.jsx)(m,{tree2D:D,currentOperation:W,currentStep:F,showBinary:E,treeSnapshot2D:J}):(0,r.jsx)(g,{tree:eO(),activeIndices:eP(),queryingIndices:eV.querying,updatingIndices:eV.updating,accumulatedIndices:_,updatedIndices:U,showBinary:E,showNodeIndex:q,dualTrees:"range-range"!==e?null:S.getTrees(),treeSnapshot:H,dualTreeSnapshots:(null==W?void 0:W.dualTreeSnapshots)||null,changeLog:Z,prefixSumValues:(()=>{if("range-update"===e){let e=[];for(let t=1;t<=s;t++){let s=N.pointQuery(t).result||0;e.push(s)}return e}if("range-range"===e){let e=[];for(let t=1;t<=s;t++)e.push(S.pointQuery(t));return e}return[]})(),cumulativeDeltaTypes:$,currentOperation:W,currentStep:F})]}),W&&W.steps.length>0&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-gray-900/80 backdrop-blur-md rounded-xl p-4 border border-gray-700/50 shadow-2xl shadow-blue-500/20 flex items-center justify-center gap-4",children:[(0,r.jsx)("button",{onClick:()=>G(Math.max(0,F-1)),disabled:0===F,className:"p-3 bg-gray-800/60 hover:bg-gray-700/70 backdrop-blur-sm rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all border border-gray-700/50",children:(0,r.jsx)(d.Z,{size:20})}),(0,r.jsx)("button",{onClick:()=>z(!T),className:"p-3 bg-blue-600/90 hover:bg-blue-700 backdrop-blur-md rounded-xl transition-all shadow-lg shadow-blue-500/50 hover:shadow-blue-500/70 border border-blue-400/50",children:T?(0,r.jsx)(o.Z,{size:20}):(0,r.jsx)(c.Z,{size:20})}),(0,r.jsx)("button",{onClick:()=>G(Math.min(W.steps.length-1,F+1)),disabled:F===W.steps.length-1,className:"p-3 bg-gray-800/60 hover:bg-gray-700/70 backdrop-blur-sm rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all border border-gray-700/50",children:(0,r.jsx)(x.Z,{size:20})}),(0,r.jsxs)("div",{className:"text-gray-400 ml-4",children:["Step ",F+1," / ",W.steps.length]})]}),(0,r.jsx)(y,{steps:W.steps,currentStep:F})]}),(0,r.jsxs)("div",{className:"bg-gray-900 rounded-xl p-6 border border-gray-800 shadow-2xl shadow-blue-500/10",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4 text-blue-400 drop-shadow-[0_0_10px_rgba(59,130,246,0.5)]",style:{fontFamily:"Playfair Display, serif"},children:"About Fenwick Tree"}),(0,r.jsxs)("div",{className:"space-y-4 text-gray-300",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-purple-400 mb-3",style:{fontFamily:"Playfair Display, serif"},children:"Understanding LSB Operations"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-base",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{className:"text-green-400",children:"a & -a"}),": Extracts the Least Significant Bit (LSB)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{className:"text-green-400",children:"a + (a & -a)"}),": Moves up the tree (update operation)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{className:"text-green-400",children:"a - (a & -a)"}),": Moves left in the tree (query operation)"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-purple-400 mb-3",style:{fontFamily:"Playfair Display, serif"},children:"Extensions"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-base",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Range Update + Point Query:"})," Uses difference array technique"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Range Update + Range Query:"})," Uses two Fenwick trees for coefficient tracking"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-purple-400 mb-3",style:{fontFamily:"Playfair Display, serif"},children:"Complexity"}),(0,r.jsxs)("p",{className:"text-base",children:["Both update and query operations run in ",(0,r.jsx)("code",{className:"text-yellow-400",children:"O(log n)"})," time."]})]})]})]})]})]})}}},function(e){e.O(0,[966,971,117,744],function(){return e(e.s=9637)}),_N_E=e.O()}]);